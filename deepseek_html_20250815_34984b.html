<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum DSE Prediction Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.24.1/plotly.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', sans-serif;
        }

        :root {
            --primary-color: #0a0e1a;
            --secondary-color: #1a1f2e;
            --accent-color: #00ff88;
            --danger-color: #ff4757;
            --warning-color: #ffa502;
            --info-color: #3742fa;
            --success-color: #2ed573;
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8;
            --card-bg: rgba(30, 35, 50, 0.7);
            --border-color: #404040;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-danger: linear-gradient(135deg, #ff4757 0%, #c44569 100%);
            --gradient-success: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
            --glass-bg: rgba(30, 35, 50, 0.2);
            --glow: 0 0 15px rgba(0, 255, 136, 0.4);
            --quantum-purple: #8a2be2;
            --quantum-blue: #00bfff;
        }

        body {
            background: radial-gradient(ellipse at top, #1e3c72 0%, #0a0e1a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 255, 136, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(55, 66, 250, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 30% 80%, rgba(255, 71, 87, 0.05) 0%, transparent 40%);
            z-index: -1;
        }

        /* Navigation */
        .navbar {
            background: rgba(10, 14, 26, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--accent-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--glow);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .navbar-nav {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-left: auto;
        }

        .badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
        }

        .bg-success { background: var(--success-color) !important; }
        .bg-warning { background: var(--warning-color) !important; }
        .bg-danger { background: var(--danger-color) !important; }
        .bg-info { background: var(--info-color) !important; }
        .text-success { color: var(--success-color) !important; }
        .text-danger { color: var(--danger-color) !important; }
        .text-warning { color: var(--warning-color) !important; }
        .text-info { color: var(--info-color) !important; }
        .text-quantum { color: var(--quantum-purple) !important; }

        /* Tabs */
        .nav-pills {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-link {
            background: transparent;
            color: var(--text-secondary);
            border-radius: 25px;
            padding: 12px 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            text-decoration: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link.active {
            background: var(--gradient-success);
            color: white;
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }

        .nav-link:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-color);
        }

        .tab-content {
            display: block;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-success);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-header {
            background: rgba(0, 255, 136, 0.1);
            border-bottom: 1px solid var(--border-color);
            padding: 1.25rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Metrics */
        .metric-card {
            background: linear-gradient(135deg, var(--card-bg) 0%, rgba(30, 35, 50, 0.9) 100%);
            border-left: 4px solid var(--accent-color);
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .metric-card::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.1) 0%, transparent 70%);
            animation: pulse-glow 3s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 0.5; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .metric-value {
            font-size: 2.8rem;
            font-weight: 800;
            background: var(--gradient-success);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }

        /* Indicators */
        .crash-indicator {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            position: relative;
            animation: pulse-indicator 2s infinite;
        }

        .crash-indicator::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            border: 2px solid currentColor;
            opacity: 0;
            animation: ripple 2s infinite;
        }

        .crash-high { 
            background-color: var(--danger-color);
            color: var(--danger-color);
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.6);
        }
        .crash-medium { 
            background-color: var(--warning-color);
            color: var(--warning-color);
            box-shadow: 0 0 20px rgba(255, 165, 2, 0.6);
        }
        .crash-low { 
            background-color: var(--success-color);
            color: var(--success-color);
            box-shadow: 0 0 20px rgba(46, 213, 115, 0.6);
        }

        @keyframes pulse-indicator {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        /* Grid System */
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px;
        }

        .col-md-3, .col-md-4, .col-md-6, .col-lg-4, .col-lg-6, .col-lg-8, .col-lg-12, .col-12 {
            padding: 0 15px;
            margin-bottom: 30px;
        }

        .col-md-3 { width: 25%; }
        .col-md-4 { width: 33.333%; }
        .col-md-6 { width: 50%; }
        .col-lg-4 { width: 33.333%; }
        .col-lg-6 { width: 50%; }
        .col-lg-8 { width: 66.666%; }
        .col-lg-12 { width: 100%; }
        .col-12 { width: 100%; }

        /* Controls */
        .timeframe-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .timeframe-btn {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }

        .timeframe-btn.active,
        .timeframe-btn:hover {
            background: var(--accent-color);
            color: var(--primary-color);
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }

        /* Alerts */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 15px;
            border: none;
            margin-bottom: 1.5rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .alert-info {
            background: rgba(55, 66, 250, 0.1);
            border: 1px solid var(--info-color);
            color: var(--info-color);
        }

        .alert-warning {
            background: rgba(255, 165, 2, 0.1);
            border: 1px solid var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
        }

        /* Progress Bars */
        .progress {
            height: 8px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.6s ease;
        }

        /* Stock Tickers */
        .stock-ticker {
            background: var(--secondary-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .stock-ticker:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .stock-up { border-left-color: var(--success-color); }
        .stock-down { border-left-color: var(--danger-color); }

        /* Prediction Panels */
        .prediction-panel {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(55, 66, 250, 0.1) 100%);
            border: 2px solid var(--accent-color);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .model-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .model-active { background: var(--success-color); }
        .model-warning { background: var(--warning-color); }
        .model-danger { background: var(--danger-color); }

        /* 3D Container */
        .three-container {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            overflow: hidden;
            background: var(--primary-color);
        }

        /* Forms */
        .form-range {
            width: 100%;
            height: 6px;
            background: #404040;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .form-range::-webkit-slider-thumb {
            width: 20px;
            height: 20px;
            background: var(--accent-color);
            border-radius: 50%;
            cursor: pointer;
            -webkit-appearance: none;
            box-shadow: var(--glow);
        }
        
        .form-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--accent-color);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .form-select {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 8px;
            width: 100%;
            backdrop-filter: blur(5px);
        }
        
        .form-select option {
            background: var(--card-bg);
            color: var(--text-primary);
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .btn-primary {
            background: var(--gradient-success);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }
        
        .w-100 {
            width: 100%;
        }

        /* Utility Classes */
        .d-flex { display: flex; }
        .justify-content-between { justify-content: space-between; }
        .justify-content-center { justify-content: center; }
        .align-items-center { align-items: center; }
        .text-center { text-align: center; }
        .text-end { text-align: right; }

        .mb-0 { margin-bottom: 0; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 1.5rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 1rem; }
        .me-2 { margin-right: 0.5rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .py-4 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .p-3 { padding: 1rem; }

        .small { font-size: 0.875rem; }
        .position-absolute { position: absolute; }
        .top-0 { top: 0; }
        .start-0 { left: 0; }

        /* Trading Statistics */
        .trading-stat {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(55,66,250,0.1) 100%);
            border-radius: 10px;
            border: 1px solid var(--border-color);
            height: 100%;
            backdrop-filter: blur(5px);
        }

        .trading-stat h6 {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .trading-stat .value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .trading-stat .change {
            font-size: 0.9rem;
        }

        /* Quantum Indicators */
        .quantum-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .quantum-node {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--accent-color);
            margin: 0 5px;
            position: relative;
            box-shadow: 0 0 10px var(--accent-color);
            animation: quantum-pulse 1.5s infinite;
        }

        .quantum-node:nth-child(2) { animation-delay: 0.2s; }
        .quantum-node:nth-child(3) { animation-delay: 0.4s; }
        .quantum-node:nth-child(4) { animation-delay: 0.6s; }
        .quantum-node:nth-child(5) { animation-delay: 0.8s; }

        @keyframes quantum-pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.5); opacity: 1; }
        }

        /* Quantum Matrix */
        .quantum-matrix {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .matrix-cell {
            background: rgba(30, 35, 50, 0.6);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--quantum-purple);
            transition: all 0.3s ease;
        }

        .matrix-cell:hover {
            transform: scale(1.03);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
        }

        /* DNA Visualization */
        .dna-container {
            position: relative;
            height: 300px;
            overflow: hidden;
            background: rgba(10, 14, 26, 0.5);
            border-radius: 15px;
            margin: 20px 0;
        }

        .dna-strand {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 2px;
            background: linear-gradient(to right, var(--quantum-purple), var(--quantum-blue));
            animation: dna-rotate 20s linear infinite;
        }

        .dna-node {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-color);
            transform: translate(-50%, -50%);
        }

        @keyframes dna-rotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .col-lg-4, .col-lg-6, .col-lg-8 {
                width: 100%;
            }
        }

        @media (max-width: 992px) {
            .col-md-3, .col-md-4, .col-md-6 {
                width: 50%;
            }
        }

        @media (max-width: 768px) {
            .col-md-3, .col-md-4, .col-md-6 {
                width: 100%;
            }

            .navbar-brand {
                font-size: 1.4rem;
            }

            .metric-value {
                font-size: 2rem;
            }

            .timeframe-controls {
                flex-wrap: wrap;
            }

            .nav-pills {
                gap: 5px;
            }

            .nav-link {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .navbar-nav {
                flex-direction: column;
                gap: 10px;
                align-items: flex-end;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 14, 26, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 4px;
        }

        /* Chart Containers */
        .chart-container {
            height: 100%;
            width: 100%;
            position: relative;
        }

        /* Floating Data Sources */
        .data-sources {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 14, 26, 0.8);
            border: 1px solid var(--accent-color);
            border-radius: 10px;
            padding: 10px;
            font-size: 0.8rem;
            backdrop-filter: blur(5px);
            z-index: 100;
            max-width: 300px;
        }

        .data-sources h6 {
            color: var(--accent-color);
            margin-bottom: 5px;
        }

        .data-source-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            padding: 3px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-source-item i {
            margin-right: 8px;
            color: var(--accent-color);
        }

        /* New Tab Styles */
        .quantum-dna {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(0, 191, 255, 0.1) 100%);
            border: 1px solid var(--quantum-purple);
        }

        .quantum-dna-header {
            background: rgba(138, 43, 226, 0.15);
            border-bottom: 1px solid var(--quantum-purple);
        }

        .quantum-dna-node {
            background: var(--quantum-purple);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.6);
        }

        /* AI Model Cards */
        .ai-model-card {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 15px;
            border: 1px solid var(--quantum-purple);
            padding: 20px;
            transition: all 0.3s ease;
            height: 100%;
        }

        .ai-model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
        }

        .ai-model-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--quantum-purple);
        }

        .model-accuracy {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .model-accuracy-bar {
            height: 100%;
            background: var(--quantum-purple);
        }

        /* 4D Visualization */
        .dimension-container {
            position: relative;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(10, 14, 26, 0.5);
            margin: 20px 0;
        }

        .dimension-element {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--quantum-purple);
            animation: dimension-pulse 3s infinite;
        }

        @keyframes dimension-pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; box-shadow: 0 0 10px var(--quantum-purple); }
            50% { transform: scale(1.5); opacity: 1; box-shadow: 0 0 20px var(--quantum-purple); }
        }
        
        /* Enhanced features */
        .tooltip {
            position: absolute;
            background: rgba(10, 14, 26, 0.95);
            border: 1px solid var(--accent-color);
            border-radius: 10px;
            padding: 15px;
            z-index: 1000;
            max-width: 300px;
            backdrop-filter: blur(10px);
            box-shadow: var(--glow);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .swot-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .swot-table th {
            background: rgba(0, 255, 136, 0.1);
            padding: 8px;
            text-align: left;
        }
        
        .swot-table td {
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 1rem;
            backdrop-filter: blur(5px);
        }
        
        .search-results {
            position: absolute;
            width: 100%;
            background: var(--secondary-color);
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: none;
        }
        
        .search-item {
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .search-item:hover {
            background: rgba(0, 255, 136, 0.1);
        }
        
        .bcg-matrix-container {
            position: relative;
            height: 600px;
        }
        
        .bcg-point {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .bcg-point:hover {
            transform: translate(-50%, -50%) scale(1.8);
            z-index: 20;
        }
        
        .matrix-quadrant {
            position: absolute;
            padding: 10px;
            font-weight: bold;
        }
        
        .model-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .model-loading {
            animation: pulse 1.5s infinite;
            background: var(--warning-color);
        }
        
        .model-active {
            background: var(--success-color);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .dna-tooltip {
            position: absolute;
            background: rgba(30, 35, 50, 0.95);
            border: 1px solid var(--quantum-purple);
            border-radius: 8px;
            padding: 10px;
            z-index: 100;
            max-width: 250px;
            font-size: 0.85rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .bcg-axis-label {
            position: absolute;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* Heatmap */
        .heatmap-cell {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.05);
        }
        
        .signal-card {
            background: rgba(30, 35, 50, 0.6);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid;
            transition: all 0.3s;
        }
        
        .signal-card:hover {
            transform: translateX(5px);
            background: rgba(30, 35, 50, 0.8);
        }
        
        .signal-buy {
            border-left-color: var(--success-color);
        }
        
        .signal-sell {
            border-left-color: var(--danger-color);
        }
        
        .signal-hold {
            border-left-color: var(--warning-color);
        }
        
        .performance-badge {
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .performance-good {
            background: rgba(46, 213, 115, 0.2);
            color: var(--success-color);
        }
        
        .performance-medium {
            background: rgba(255, 165, 2, 0.2);
            color: var(--warning-color);
        }
        
        .performance-poor {
            background: rgba(255, 71, 87, 0.2);
            color: var(--danger-color);
        }
        
        /* Stock Prediction Styles */
        .prediction-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .prediction-card {
            background: rgba(30, 35, 50, 0.6);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }
        
        .prediction-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }
        
        .prediction-period {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .prediction-value {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .prediction-return {
            font-size: 0.85rem;
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .return-positive {
            background: rgba(46, 213, 115, 0.2);
            color: var(--success-color);
        }
        
        .return-negative {
            background: rgba(255, 71, 87, 0.2);
            color: var(--danger-color);
        }

        /* Quantum Deep Analysis specific styles */
        .sub-nav-pills {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            list-style: none;
            padding: 0;
        }
        
        .sub-nav-link {
            background: transparent;
            color: var(--text-secondary);
            border-radius: 25px;
            padding: 12px 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            text-decoration: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .sub-nav-link.active {
            background: var(--gradient-success);
            color: white;
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }
        
        .sub-nav-link:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-color);
        }
        
        .quantum-deep-analysis {
            background: rgba(138, 43, 226, 0.1);
            border: 1px solid var(--quantum-purple);
            border-radius: 15px;
            padding: 1.5rem;
        }
        
        .dna-strand-vertical {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 90%;
            background: linear-gradient(to bottom, var(--quantum-purple), var(--quantum-blue));
        }
        
        .dna-node-vertical {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-color);
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .dna-connection {
            position: absolute;
            height: 2px;
            background: var(--accent-color);
            transform-origin: left center;
        }
        
        .dna-sequence {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            margin: 15px 0;
        }
        
        .dna-base {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .dna-base-A { background: #ff4757; }
        .dna-base-T { background: #00bfff; }
        .dna-base-C { background: #2ed573; }
        .dna-base-G { background: #ffa502; }
        
        .quantum-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .quantum-stat {
            background: rgba(30, 35, 50, 0.6);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .quantum-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
            color: var(--accent-color);
        }
        
        .quantum-network {
            position: relative;
            height: 400px;
            background: rgba(10, 14, 26, 0.5);
            border-radius: 15px;
        }
        
        .network-node {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 20;
            box-shadow: 0 0 10px currentColor;
        }
        
        .network-connection {
            position: absolute;
            height: 2px;
            transform-origin: 0 0;
            z-index: 10;
        }
        
        .quantum-network-tooltip {
            position: absolute;
            background: rgba(10, 14, 26, 0.95);
            border: 1px solid var(--accent-color);
            border-radius: 10px;
            padding: 15px;
            z-index: 1000;
            max-width: 300px;
            backdrop-filter: blur(10px);
            box-shadow: var(--glow);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .risk-map {
            position: relative;
            height: 400px;
            background: rgba(10, 14, 26, 0.5);
            border-radius: 15px;
        }
        
        .risk-zone {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transform: translate(-50%, -50%);
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
        }
        
        /* Stock logo styles */
        .stock-logo {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .stock-ticker .stock-logo-container {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }
        
        .stock-info {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        .stock-ticker-content {
            display: flex;
            align-items: center;
            width: 100%;
        }
        
        .stock-price-info {
            text-align: right;
            margin-left: auto;
        }
        
        .search-item .stock-info {
            display: flex;
            align-items: center;
        }
        
        .stock-info-details {
            margin-left: 10px;
        }
        
        .selected-stock-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .selected-stock-logo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--accent-color);
            box-shadow: var(--glow);
        }
        
        /* Portfolio Builder Specific Styles */
        .qpb-container {
            background: rgba(30, 35, 50, 0.5);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--quantum-purple);
        }
        
        .qpb-header {
            color: var(--accent-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .qpb-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .qpb-card {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }
        
        .qpb-card h4 {
            color: var(--accent-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .qpb-control-item {
            margin-bottom: 15px;
        }
        
        .qpb-control-item label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .qpb-range-value {
            display: inline-block;
            width: 100px;
            text-align: right;
            color: var(--accent-color);
            font-weight: 700;
        }
        
        .qpb-stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .qpb-stock-card {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .qpb-stock-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }
        
        .qpb-stock-card.selected {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-color);
            box-shadow: var(--glow);
        }
        
        .qpb-stock-card .symbol {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--accent-color);
        }
        
        .qpb-stock-card .name {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .qpb-stock-card .price {
            font-weight: 700;
        }
        
        .qpb-selected-stocks {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .qpb-selected-tag {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--accent-color);
            border-radius: 20px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .qpb-remove-stock {
            color: var(--danger-color);
            cursor: pointer;
        }
        
        .qpb-portfolio-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .qpb-portfolio-section {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--quantum-purple);
        }
        
        .qpb-portfolio-section h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .qpb-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }
        
        .qpb-stat-card {
            background: rgba(10, 14, 26, 0.5);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .qpb-stat-card .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-color);
            margin: 5px 0;
        }
        
        .qpb-stat-card .label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .qpb-advice-container {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--quantum-purple);
            margin-top: 20px;
        }
        
        .qpb-advice-container h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .qpb-advice-content {
            background: rgba(10, 14, 26, 0.3);
            border-radius: 10px;
            padding: 15px;
            border-left: 3px solid var(--quantum-purple);
        }
        
        .qpb-visualization-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .qpb-visualization {
            background: rgba(30, 35, 50, 0.7);
            border-radius: 15px;
            padding: 20px;
            height: 400px;
            border: 1px solid var(--quantum-purple);
        }
        
        .qpb-visualization h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .qpb-generate-btn {
            background: var(--gradient-success);
            color: white;
            border: 0;
            border-radius: 8px;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto;
        }
        
        .qpb-generate-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--glow);
        }
        
        .qpb-quantum-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .qpb-quantum-node {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--accent-color);
            margin: 0 5px;
            position: relative;
            box-shadow: 0 0 10px var(--accent-color);
            animation: quantum-pulse 1.5s infinite;
        }
        
        .qpb-quantum-node:nth-child(2) { animation-delay: 0.2s; }
        .qpb-quantum-node:nth-child(3) { animation-delay: 0.4s; }
        .qpb-quantum-node:nth-child(4) { animation-delay: 0.6s; }
        .qpb-quantum-node:nth-child(5) { animation-delay: 0.8s; }
        
        .qpb-form-control {
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            background: rgba(10, 14, 26, 0.5);
            border: 1px solid var(--border-color);
            color: #fff;
        }
        
        .qpb-form-control[type="range"] {
            -webkit-appearance: none;
            height: 6px;
            background: rgba(0, 255, 136, 0.2);
            outline: 0;
        }
        
        .qpb-form-control[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
        }
        
        .qpb-form-check {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .qpb-form-check-input {
            width: 18px;
            height: 18px;
        }
        
        .qpb-search-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .qpb-search-input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            background: rgba(10, 14, 26, 0.5);
            border: 1px solid var(--border-color);
            color: #fff;
            font-size: 1rem;
        }
        
        .qpb-search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--secondary-color);
            border-radius: 0 0 10px 10px;
            z-index: 100;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .qpb-search-results .qpb-stock-card {
            margin: 5px;
        }
        
        .qpb-controls-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .qpb-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .qpb-btn-outline-warning {
            border-color: var(--warning-color);
            color: var(--warning-color);
        }
        
        .qpb-btn-outline-success {
            border-color: var(--success-color);
            color: var(--success-color);
        }
        
        @media (max-width: 992px) {
            .qpb-grid,
            .qpb-portfolio-results,
            .qpb-visualization-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .qpb-stock-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            .qpb-stats-grid,
            .qpb-controls-row {
                grid-template-columns: 1fr;
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-chart-network"></i> Quantum DSE Predictor
            </a>
            <div class="navbar-nav">
                <span class="badge bg-success">
                    <i class="fas fa-satellite"></i> Live DSE Data
                </span>
                <span class="navbar-text">
                    <i class="fas fa-sync-alt"></i> Updated: <span id="updateTime">--:--</span>
                </span>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <!-- Main Tab Navigation -->
        <ul class="nav nav-pills" id="mainTabs">
            <li class="nav-item">
                <button class="nav-link active" id="market-overview-tab" onclick="switchMainTab('market-overview')">
                    <i class="fas fa-chart-bar"></i> Market Overview
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="intelligence-report-tab" onclick="switchMainTab('intelligence-report')">
                    <i class="fas fa-brain"></i> Intelligence Report
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="enhanced-financial-tab" onclick="switchMainTab('enhanced-financial')">
                    <i class="fas fa-rocket"></i> Quantum Prediction Suite
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="sector-analysis-tab" onclick="switchMainTab('sector-analysis')">
                    <i class="fas fa-industry"></i> Sector Analysis
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="technical-analysis-tab" onclick="switchMainTab('technical-analysis')">
                    <i class="fas fa-chart-line"></i> Technical Analysis
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="quantum-dna-tab" onclick="switchMainTab('quantum-dna')">
                    <i class="fas fa-dna"></i> Quantum DNA
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="ai-models-tab" onclick="switchMainTab('ai-models')">
                    <i class="fas fa-robot"></i> AI Models
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="stock-prediction-tab" onclick="switchMainTab('stock-prediction')">
                    <i class="fas fa-chart-line"></i> Stock Prediction
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" id="quantum-deep-tab" onclick="switchMainTab('quantum-deep')">
                    <i class="fas fa-microchip"></i> Quantum Deep Analysis
                </button>
            </li>
            <!-- New Portfolio Tab -->
            <li class="nav-item">
                <button class="nav-link" id="quantum-portfolio-tab" onclick="switchMainTab('quantum-portfolio')">
                    <i class="fas fa-chart-pie"></i> Quantum Portfolio
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Market Overview Tab -->
            <div class="tab-pane active" id="market-overview">
                <!-- Current Market Status -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-secondary mb-2">DSEX Index</h6>
                                        <div class="metric-value" id="dsex-value">5,315.45</div>
                                        <small class="text-danger" id="dsex-change">
                                             -28.60 (-0.54%)
                                        </small>
                                    </div>
                                    <div class="text-danger" style="font-size: 2rem;">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-secondary mb-2">DS30 Index</h6>
                                        <div class="metric-value" id="ds30-value">2,051.30</div>
                                        <small class="text-danger" id="ds30-change">
                                             -15.73 (-0.76%)
                                        </small>
                                    </div>
                                    <div class="text-danger" style="font-size: 2rem;">
                                        <i class="fas fa-bullseye"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-secondary mb-2">Total Volume</h6>
                                        <div class="metric-value" id="volume-value">205.58M</div>
                                        <small class="text-info" id="volume-change">
                                            -29.0% vs yesterday
                                        </small>
                                    </div>
                                    <div class="text-info" style="font-size: 2rem;">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-secondary mb-2">Market Cap</h6>
                                        <div class="metric-value" id="marketcap-value">7.11T</div>
                                        <small class="text-success" id="marketcap-text">
                                            7,106,525mn value
                                        </small>
                                    </div>
                                    <div class="text-success" style="font-size: 2rem;">
                                        <i class="fas fa-coins"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market Overview Charts -->
                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-line"></i> DSE Market Performance Today</h5>
                            </div>
                            <div class="card-body">
                                <div id="marketOverviewChart" style="height: 400px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-trophy"></i> Top Gainers</h5>
                            </div>
                            <div class="card-body">
                                <div id="topGainersList"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trading Statistics -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="trading-stat">
                            <h6><i class="fas fa-arrow-up"></i> Advancing Issues</h6>
                            <div class="value text-success" id="advancing-value">105</div>
                            <div class="change" id="advancing-change">vs 128 yesterday</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="trading-stat">
                            <h6><i class="fas fa-arrow-down"></i> Declining Issues</h6>
                            <div class="value text-danger" id="declining-value">187</div>
                            <div class="change" id="declining-change">vs 92 yesterday</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="trading-stat">
                            <h6><i class="fas fa-pause"></i> Unchanged</h6>
                            <div class="value text-warning" id="unchanged-value">38</div>
                            <div class="change" id="unchanged-change">vs 45 yesterday</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="trading-stat">
                            <h6><i class="fas fa-exchange-alt"></i> Total Trades</h6>
                            <div class="value text-info" id="trades-value">202,671</div>
                            <div class="change" id="trades-change">-24.3% decrease</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Intelligence Report Tab -->
            <div class="tab-pane" id="intelligence-report">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h5><i class="fas fa-brain"></i> Quantum Market Intelligence</h5>
                            <p class="mb-0">AI-powered market analysis combining quantum computing, technical indicators, sentiment analysis, and macroeconomic factors.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-pie"></i> Market Sentiment Analysis</h5>
                            </div>
                            <div class="card-body">
                                <div id="sentimentChart" style="height: 300px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-bullseye"></i> AI Trading Signals</h5>
                            </div>
                            <div class="card-body">
                                <div class="prediction-panel">
                                    <h6 class="mb-3">Current Signals</h6>
                                    
                                    <div class="mb-3">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="model-indicator model-warning"></span>
                                            <strong>Telecom Sector - HOLD</strong>
                                        </div>
                                        <div class="small text-secondary">
                                            Confidence: 72% | Volatility expected
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="model-indicator model-danger"></span>
                                            <strong>Banking Sector - SELL</strong>
                                        </div>
                                        <div class="small text-secondary">
                                            Confidence: 86% | Interest rate concerns
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="model-indicator model-active"></span>
                                            <strong>Pharma Sector - BUY</strong>
                                        </div>
                                        <div class="small text-secondary">
                                            Confidence: 92% | Strong export growth
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-project-diagram"></i> Quantum Intelligence Dashboard</h5>
                            </div>
                            <div class="card-body">
                                <div id="intelligenceChart" style="height: 400px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quantum Prediction Suite Tab -->
            <div class="tab-pane" id="enhanced-financial">
                <!-- Sub-navigation for Enhanced Financial Dashboard -->
                <ul class="nav nav-pills mb-4" id="enhancedTabs">
                    <li class="nav-item">
                        <button class="nav-link active" id="dsex-overview-tab" onclick="switchEnhancedTab('dsex-overview')">
                            <i class="fas fa-chart-line"></i> DSEX Prediction
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="predictive-models-tab" onclick="switchEnhancedTab('predictive-models')">
                            <i class="fas fa-microchip"></i> AI Models
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="crash-prediction-tab" onclick="switchEnhancedTab('crash-prediction')">
                            <i class="fas fa-shield-alt"></i> Risk Shield
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="ds30-stocks-tab" onclick="switchEnhancedTab('ds30-stocks')">
                            <i class="fas fa-star"></i> Top Stocks
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="4d-analysis-tab" onclick="switchEnhancedTab('4d-analysis')">
                            <i class="fas fa-cubes"></i> 4D Analysis
                        </button>
                    </li>
                </ul>

                <!-- Enhanced Financial Sub-tabs Content -->
                <div class="tab-content">
                    <!-- DSEX Overview Sub-tab -->
                    <div class="tab-pane active" id="dsex-overview">
                        <!-- Current Market Status -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card metric-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-secondary mb-2">DSEX Index</h6>
                                                <div class="metric-value" id="dsex-prediction-value">5,315.45</div>
                                                <small class="text-danger" id="dsex-prediction-change">
                                                     -28.60 (-0.54%)
                                                </small>
                                            </div>
                                            <div class="text-danger" style="font-size: 2rem;">
                                                <i class="fas fa-chart-line-down"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card metric-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-secondary mb-2">DS30 Index</h6>
                                                <div class="metric-value" id="ds30-prediction-value">2,051.30</div>
                                                <small class="text-danger" id="ds30-prediction-change">
                                                     -15.73 (-0.76%)
                                                </small>
                                            </div>
                                            <div class="text-warning" style="font-size: 2rem;">
                                                <i class="fas fa-bullseye"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card metric-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-secondary mb-2">Total Volume</h6>
                                                <div class="metric-value" id="volume-prediction-value">205.58M</div>
                                                <small class="text-info" id="volume-prediction-text">
                                                    202,671 trades
                                                </small>
                                            </div>
                                            <div class="text-info" style="font-size: 2rem;">
                                                <i class="fas fa-chart-pie"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card metric-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-secondary mb-2">Market Cap</h6>
                                                <div class="metric-value" id="marketcap-prediction-value">7.11T</div>
                                                <small class="text-success" id="marketcap-prediction-text">
                                                    7,106,525mn value
                                                </small>
                                            </div>
                                            <div class="text-success" style="font-size: 2rem;">
                                                <i class="fas fa-coins"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- DSEX Prediction Chart -->
                        <div class="row">
                            <div class="col-lg-8 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">
                                            <i class="fas fa-crystal-ball"></i> Quantum DSEX Prediction
                                        </h5>
                                        <div class="timeframe-controls">
                                            <button class="timeframe-btn active" onclick="switchTimeframe('1M')">1M</button>
                                            <button class="timeframe-btn" onclick="switchTimeframe('3M')">3M</button>
                                            <button class="timeframe-btn" onclick="switchTimeframe('6M')">6M</button>
                                            <button class="timeframe-btn" onclick="switchTimeframe('1Y')">1Y</button>
                                            <button class="timeframe-btn" onclick="switchTimeframe('2Y')">2Y</button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div id="dsexPredictionChart" style="height: 450px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-brain"></i> AI Prediction Models</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="prediction-panel">
                                            <h6 class="mb-3">Active Prediction Models</h6>
                                            
                                            <div class="mb-3">
                                                <div class="d-flex align-items-center mb-2">
                                                    <span class="model-indicator model-active"></span>
                                                    <strong>Quantum Neural Network</strong>
                                                </div>
                                                <div class="small text-secondary">
                                                    Accuracy: 93.7% | Confidence: High
                                                </div>
                                                <div class="small">Predicts: +2.8% (30 days)</div>
                                            </div>

                                            <div class="mb-3">
                                                <div class="d-flex align-items-center mb-2">
                                                    <span class="model-indicator model-warning"></span>
                                                    <strong>Deep Learning Transformer</strong>
                                                </div>
                                                <div class="small text-secondary">
                                                    Accuracy: 88.8% | Confidence: Medium
                                                </div>
                                                <div class="small">Predicts: -0.5% (30 days)</div>
                                            </div>

                                            <div class="mb-3">
                                                <div class="d-flex align-items-center mb-2">
                                                    <span class="model-indicator model-active"></span>
                                                    <strong>Quantum Bayesian Network</strong>
                                                </div>
                                                <div class="small text-secondary">
                                                    Accuracy: 91.2% | Confidence: High
                                                </div>
                                                <div class="small">Predicts: +1.9% (30 days)</div>
                                            </div>

                                            <div class="mb-3">
                                                <div class="d-flex align-items-center mb-2">
                                                    <span class="model-indicator model-danger"></span>
                                                    <strong>Linear Regression</strong>
                                                </div>
                                                <div class="small text-secondary">
                                                    Accuracy: 75.4% | Confidence: Low
                                                </div>
                                                <div class="small">Predicts: -1.2% (30 days)</div>
                                            </div>
                                        </div>

                                        <div class="alert alert-info mt-3">
                                            <h6><i class="fas fa-lightbulb"></i> Quantum Consensus Forecast</h6>
                                            <p class="mb-0 small">
                                                <strong>+1.4%</strong> expected movement in next 30 days based on quantum model ensemble.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Predictive Models Sub-tab -->
                    <div class="tab-pane" id="predictive-models">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-warning">
                                    <h5><i class="fas fa-microchip"></i> Quantum AI Prediction Engine</h5>
                                    <p class="mb-0">Quantum-enhanced machine learning models analyze over 500 technical indicators, macroeconomic factors, and global market data to predict DSE movements.</p>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-tachometer-alt"></i> Model Performance</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="modelPerformanceChart" style="height: 350px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-sitemap"></i> Quantum Feature Importance</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="featureImportanceChart" style="height: 350px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-hourglass-half"></i> Multi-Horizon Predictions</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="multiHorizonChart" style="height: 400px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Crash Prediction Sub-tab -->
                    <div class="tab-pane" id="crash-prediction">
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <div class="crash-indicator crash-medium mb-3 mx-auto"></div>
                                        <h5>Crash Risk Level</h5>
                                        <div class="metric-value text-warning">MEDIUM</div>
                                        <p class="text-secondary">36% probability</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <div class="crash-indicator crash-high mb-3 mx-auto"></div>
                                        <h5>Volatility Index</h5>
                                        <div class="metric-value text-danger">0.72</div>
                                        <p class="text-secondary">High volatility</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <div class="crash-indicator crash-low mb-3 mx-auto"></div>
                                        <h5>Market Sentiment</h5>
                                        <div class="metric-value text-success">0.38</div>
                                        <p class="text-secondary">Cautiously bearish</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-8 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-shield-alt"></i> Quantum Crash Prediction</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="crashPredictionChart" style="height: 400px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-exclamation-triangle"></i> Risk Assessment</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>Overall Risk Level</span>
                                                <span class="badge bg-warning">MEDIUM</span>
                                            </div>
                                            <div class="progress mt-2">
                                                <div class="progress-bar bg-warning" style="width: 68%"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>Crash Probability (30d)</span>
                                                <span class="text-warning">36%</span>
                                            </div>
                                            <div class="progress mt-2">
                                                <div class="progress-bar bg-warning" style="width: 36%"></div>
                                            </div>
                                        </div>

                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <span>Market Sentiment</span>
                                                <span class="text-danger">Bearish</span>
                                            </div>
                                            <div class="progress mt-2">
                                                <div class="progress-bar bg-danger" style="width: 82%"></div>
                                            </div>
                                        </div>

                                        <div class="alert alert-danger mt-3">
                                            <h6><i class="fas fa-exclamation-circle"></i> Quantum Alert</h6>
                                            <p class="mb-0 small">Increased volatility detected. Monitor key support levels at 5,200 and 5,000.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-industry"></i> Sector Vulnerability Analysis</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="sectorVulnerabilityChart" style="height: 350px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DS30 Stocks Sub-tab -->
                    <div class="tab-pane" id="ds30-stocks">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-info">
                                    <h5><i class="fas fa-star"></i> DS30 Index Components - Quantum Analysis</h5>
                                    <p class="mb-0">Real-time quantum analysis and prediction for the top 30 stocks in the DS30 index with individual stock forecasts.</p>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-8 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-fire"></i> Stock Performance Matrix</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="stocksHeatmapChart" style="height: 500px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-trophy"></i> Top Performers & Laggards</h5>
                                    </div>
                                    <div class="card-body" style="max-height: 500px; overflow-y: auto;">
                                        <div id="stocksList"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-crystal-ball"></i> Quantum Stock Predictions</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="stockPredictionsChart" style="height: 400px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4D Analysis Sub-tab -->
                    <div class="tab-pane" id="4d-analysis">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-warning">
                                    <h5><i class="fas fa-cubes"></i> 4D Quantum Market Analysis</h5>
                                    <p class="mb-0">Interactive 4D visualization of quantum market dynamics, correlation patterns, and multidimensional risk assessment.</p>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-8 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0"><i class="fas fa-globe-asia"></i> Quantum Market Correlation Sphere</h5>
                                        <div class="d-flex align-items-center gap-2">
                                            <span class="badge bg-success"><i class="fas fa-quantum-computer"></i> Quantum Models Active</span>
                                            <span class="badge bg-info"><i class="fas fa-database"></i> Real-time DSE Data</span>
                                        </div>
                                    </div>
                                    <div class="card-body position-relative">
                                        <div id="fourDContainer" class="three-container"></div>
                                        <div class="quantum-indicator">
                                            <div class="quantum-node"></div>
                                            <div class="quantum-node"></div>
                                            <div class="quantum-node"></div>
                                            <div class="quantum-node"></div>
                                            <div class="quantum-node"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-sliders-h"></i> Quantum Controls</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="small text-secondary">Animation Speed</label>
                                            <input type="range" class="form-range" min="0" max="10" value="2" id="animationSpeed" 
                                                   onchange="updateAnimationSpeed(this.value)">
                                            <div class="small text-info">Current: <span id="speedValue">2x</span></div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="small text-secondary">Market Layer Focus</label>
                                            <select class="form-select" id="marketLayer" onchange="updateMarketLayer(this.value)">
                                                <option value="all">All Market Layers</option>
                                                <option value="sectors">DSE Sectors Only</option>
                                                <option value="global">Global Correlations</option>
                                                <option value="institutional">Institutional Flows</option>
                                                <option value="quantum">Quantum Entanglement</option>
                                            </select>
                                        </div>
                                        
                                        <button class="btn btn-primary w-100 mb-2" onclick="reset4DView()"><i class="fas fa-sync-alt"></i> Reset View</button>
                                        <button class="btn btn-success w-100 mb-2" onclick="toggleAutoRotation()"><i class="fas fa-redo"></i> Auto Rotation</button>
                                        
                                        <div class="mt-3 p-3" style="background: rgba(0,255,136,0.1); border-radius: 8px; border: 1px solid var(--accent-color);">
                                            <h6 class="mb-2"><i class="fas fa-lightbulb"></i> Quantum Insights</h6>
                                            <div class="small mb-1">
                                                <strong>Entanglement Strength:</strong> <span id="entanglementValue">76.8%</span>
                                            </div>
                                            <div class="small mb-1">
                                                <strong>Market Coherence:</strong> <span id="coherenceValue">0.63</span>
                                            </div>
                                            <div class="small">
                                                <strong>Prediction Accuracy:</strong> <span id="accuracyValue">91.7%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-atom"></i> 4D Market Structure</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="dimension-container" id="dimensionContainer">
                                            <!-- 4D elements will be added here by JS -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sector Analysis Tab -->
            <div class="tab-pane" id="sector-analysis">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h5><i class="fas fa-industry"></i> Quantum Sector Analysis</h5>
                            <p class="mb-0">Deep dive into sector performance, trends, and cross-sector correlations in the DSE market using quantum analysis.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-bar"></i> Sector Performance Comparison</h5>
                            </div>
                            <div class="card-body">
                                <div id="sectorPerformanceChart" style="height: 400px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-trophy"></i> Sector Rankings</h5>
                            </div>
                            <div class="card-body">
                                <div id="sectorRankings"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-project-diagram"></i> Quantum Correlation Matrix</h5>
                            </div>
                            <div class="card-body">
                                <div id="correlationMatrixChart" style="height: 500px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Analysis Tab -->
            <div class="tab-pane" id="technical-analysis">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-warning">
                            <h5><i class="fas fa-chart-line"></i> Quantum Technical Analysis Suite</h5>
                            <p class="mb-0">Comprehensive technical indicators, chart patterns, and algorithmic trading signals enhanced with quantum computing.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-tachometer-alt"></i> Technical Indicators Dashboard</h5>
                            </div>
                            <div class="card-body">
                                <div id="technicalChart" style="height: 500px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-bullhorn"></i> Technical Signals</h5>
                            </div>
                            <div class="card-body">
                                <div id="technicalSignals"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-wave-square"></i> Moving Averages</h5>
                            </div>
                            <div class="card-body">
                                <div id="movingAveragesChart" style="height: 300px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-bolt"></i> Momentum Indicators</h5>
                            </div>
                            <div class="card-body">
                                <div id="momentumChart" style="height: 300px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quantum DNA Tab -->
            <div class="tab-pane" id="quantum-dna">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert quantum-dna">
                            <h5 class="mb-0"><i class="fas fa-dna"></i> Quantum Market DNA Analysis</h5>
                            <p class="mb-0">Decoding the fundamental building blocks of market behavior using quantum computing principles.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="card quantum-dna">
                            <div class="card-header quantum-dna-header">
                                <h5 class="mb-0"><i class="fas fa-atom"></i> Market DNA Structure</h5>
                            </div>
                            <div class="card-body">
                                <div class="dna-container" id="dnaVisualization">
                                    <!-- DNA visualization will be added here by JS -->
                                </div>
                                <div class="text-center">
                                    <p class="text-quantum small">Market DNA Entanglement: 87.3%</p>
                                    <p class="text-quantum small">Quantum Coherence: 0.78</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="card quantum-dna">
                            <div class="card-header quantum-dna-header">
                                <h5 class="mb-0"><i class="fas fa-project-diagram"></i> Market Genetic Matrix</h5>
                            </div>
                            <div class="card-body">
                                <div class="quantum-matrix" id="quantumMatrix">
                                    <!-- Quantum matrix elements will be added here by JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card quantum-dna">
                            <div class="card-header quantum-dna-header">
                                <h5 class="mb-0"><i class="fas fa-brain"></i> Quantum Market DNA Analysis</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="ai-model-card">
                                            <div class="ai-model-icon">
                                                <i class="fas fa-dna"></i>
                                            </div>
                                            <h6>Base Pairs</h6>
                                            <p class="small">Market sentiment, volatility, liquidity, and momentum form the fundamental building blocks.</p>
                                            <div class="model-accuracy">
                                                <div class="model-accuracy-bar" style="width: 92%"></div>
                                            </div>
                                            <p class="small text-quantum">Accuracy: 92%</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ai-model-card">
                                            <div class="ai-model-icon">
                                                <i class="fas fa-helmet-battle"></i>
                                            </div>
                                            <h6>Quantum Entanglement</h6>
                                            <p class="small">Interconnected market elements that influence each other across dimensions.</p>
                                            <div class="model-accuracy">
                                                <div class="model-accuracy-bar" style="width: 87%"></div>
                                            </div>
                                            <p class="small text-quantum">Accuracy: 87%</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="ai-model-card">
                                            <div class="ai-model-icon">
                                                <i class="fas fa-bolt"></i>
                                            </div>
                                            <h6>Superposition State</h6>
                                            <p class="small">Market exists in multiple potential states simultaneously until observed.</p>
                                            <div class="model-accuracy">
                                                <div class="model-accuracy-bar" style="width: 85%"></div>
                                            </div>
                                            <p class="small text-quantum">Accuracy: 85%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Models Tab -->
            <div class="tab-pane" id="ai-models">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h5><i class="fas fa-robot"></i> Quantum AI Prediction Models</h5>
                            <p class="mb-0">Advanced AI models enhanced with quantum computing capabilities for market prediction.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-brain"></i> Quantum Neural Network</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-network-wired fa-3x text-quantum"></i>
                                </div>
                                <p class="small">Uses quantum superposition to evaluate multiple market scenarios simultaneously.</p>
                                <div class="d-flex justify-content-between small">
                                    <span>Accuracy:</span>
                                    <span class="text-success">93.7%</span>
                                </div>
                                <div class="progress mt-1 mb-3">
                                    <div class="progress-bar bg-success" style="width: 93.7%"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>Prediction Horizon:</span>
                                    <span>30 Days</span>
                                </div>
                                <button class="btn btn-primary w-100 mt-3" onclick="activateModel('Quantum Neural Network')">Activate Model</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-project-diagram"></i> Deep Quantum Transformer</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-sitemap fa-3x text-quantum"></i>
                                </div>
                                <p class="small">Analyzes market sentiment and news with quantum-enhanced NLP capabilities.</p>
                                <div class="d-flex justify-content-between small">
                                    <span>Accuracy:</span>
                                    <span class="text-success">89.2%</span>
                                </div>
                                <div class="progress mt-1 mb-3">
                                    <div class="progress-bar bg-success" style="width: 89.2%"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>Prediction Horizon:</span>
                                    <span>14 Days</span>
                                </div>
                                <button class="btn btn-primary w-100 mt-3" onclick="activateModel('Deep Quantum Transformer')">Activate Model</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-atom"></i> Quantum Bayesian Network</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <i class="fas fa-circle-nodes fa-3x text-quantum"></i>
                                </div>
                                <p class="small">Models probabilistic relationships between market factors using quantum computing.</p>
                                <div class="d-flex justify-content-between small">
                                    <span>Accuracy:</span>
                                    <span class="text-success">91.5%</span>
                                </div>
                                <div class="progress mt-1 mb-3">
                                    <div class="progress-bar bg-success" style="width: 91.5%"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>Prediction Horizon:</span>
                                    <span>60 Days</span>
                                </div>
                                <button class="btn btn-primary w-100 mt-3" onclick="activateModel('Quantum Bayesian Network')">Activate Model</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-line"></i> Model Performance Comparison</h5>
                            </div>
                            <div class="card-body">
                                <div id="modelComparisonChart" style="height: 400px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stock Prediction Tab -->
            <div class="tab-pane" id="stock-prediction">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h5><i class="fas fa-search-dollar"></i> Quantum Stock Prediction</h5>
                            <p class="mb-0">Search and analyze individual stock predictions with quantum-enhanced accuracy</p>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-lg-8">
                        <div class="search-container">
                            <input type="text" class="search-input" id="stockSearch" placeholder="Search by stock name or symbol..." oninput="searchStocks(this.value)">
                            <div class="search-results" id="searchResults"></div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div class="selected-stock-header">
                                    <div id="selectedStockLogo" class="selected-stock-logo"></div>
                                    <h5 class="mb-0" id="selectedStockName">Select a stock</h5>
                                </div>
                                <div class="d-flex">
                                    <div class="badge bg-info me-2">
                                        <i class="fas fa-calendar"></i> Current Date: <span id="currentDate"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div id="stockPredictionChart" style="height: 300px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-info-circle"></i> Stock Information</h5>
                            </div>
                            <div class="card-body" id="stockInfo">
                                <p class="text-center text-secondary">Select a stock to view details</p>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-line"></i> Quantum Predictions</h5>
                            </div>
                            <div class="card-body">
                                <div class="prediction-grid" id="predictionGrid">
                                    <div class="prediction-card">
                                        <div class="prediction-period">1 Day</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">3 Days</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">7 Days</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">15 Days</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">1 Month</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">3 Months</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">6 Months</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                    <div class="prediction-card">
                                        <div class="prediction-period">1 Year</div>
                                        <div class="prediction-value">--</div>
                                        <div class="prediction-return">--</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quantum Deep Analysis Tab -->
            <div class="tab-pane" id="quantum-deep">
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert quantum-deep-analysis">
                            <h5 class="mb-0"><i class="fas fa-atom"></i> Quantum Deep Analysis Dashboard</h5>
                            <p class="mb-0">Advanced quantum computing techniques applied to market DNA sequencing, correlation analysis, and predictive modeling.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Sub-navigation for Quantum Deep Analysis -->
                <ul class="sub-nav-pills mb-4" id="quantumDeepTabs">
                    <li class="nav-item">
                        <button class="sub-nav-link active" onclick="switchQuantumDeepTab('market-dna')">
                            <i class="fas fa-dna"></i> Market DNA Sequencing
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="sub-nav-link" onclick="switchQuantumDeepTab('correlation-matrix')">
                            <i class="fas fa-project-diagram"></i> Quantum Correlation Matrix
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="sub-nav-link" onclick="switchQuantumDeepTab('predictive-analytics')">
                            <i class="fas fa-crystal-ball"></i> Predictive Analytics
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="sub-nav-link" onclick="switchQuantumDeepTab('risk-dna')">
                            <i class="fas fa-radiation"></i> Risk DNA Mapping
                        </button>
                    </li>
                </ul>
                
                <!-- Quantum Deep Analysis Sub-tabs Content -->
                <div class="tab-content">
                    <!-- Market DNA Sequencing Sub-tab -->
                    <div class="tab-pane active" id="market-dna">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-dna"></i> Market DNA Structure</h5>
                                        <div class="d-flex align-items-center">
                                            <button class="btn btn-sm btn-primary me-2" onclick="generateNewDNA()">
                                                <i class="fas fa-redo"></i> Generate New
                                            </button>
                                            <button class="btn btn-sm btn-warning" onclick="toggleDNARotation()">
                                                <i class="fas fa-pause"></i> Pause Rotation
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="dna-container" id="dnaHelix"></div>
                                        <div class="dna-sequence" id="dnaSequence"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-table"></i> Sector DNA Correlation Matrix</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="sectorDnaMatrix"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quantum Correlation Matrix Sub-tab -->
                    <div class="tab-pane" id="correlation-matrix">
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-project-diagram"></i> Quantum Correlation Network</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="quantumNetwork" class="quantum-network"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-table"></i> Correlation Statistics</h5>
                                    </div>
                                    <div class="card-body">
                                        <table class="table table-borderless">
                                            <thead>
                                                <tr>
                                                    <th>Sector Pair</th>
                                                    <th>Correlation</th>
                                                    <th>Entanglement</th>
                                                    <th>Stability</th>
                                                    <th>Risk</th>
                                                </tr>
                                            </thead>
                                            <tbody id="correlationTable"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Predictive Analytics Sub-tab -->
                    <div class="tab-pane" id="predictive-analytics">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-crystal-ball"></i> Quantum Market Forecast</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="quantumPredictiveChart"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk DNA Mapping Sub-tab -->
                    <div class="tab-pane" id="risk-dna">
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-radiation"></i> Market Risk Map</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="riskMap" class="risk-map"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-chart-bar"></i> Sector Risk Profile</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="sectorRiskProfile"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quantum Portfolio Tab -->
            <div class="tab-pane" id="quantum-portfolio">
                <div class="qpb-container">
                    <h2 class="qpb-header">
                        <i class="fas fa-chart-pie"></i> Quantum Portfolio Builder
                    </h2>
                    <p>Create optimal portfolio using quantum analysis. Select 10-50 stocks.</p>
                    
                    <div class="qpb-grid">
                        <div class="qpb-card">
                            <h4><i class="fas fa-user"></i> Investor Profile</h4>
                            <div class="qpb-control-item">
                                <label>Age: <span class="qpb-range-value" id="qpb-age-value">35</span> years</label>
                                <input type="range" class="qpb-form-control" id="qpb-age" min="18" max="70" value="35" oninput="qpb_updateValue('qpb-age','qpb-age-value')">
                            </div>
                            <div class="qpb-control-item">
                                <label>Risk: <span class="qpb-range-value" id="qpb-risk-value">Medium</span></label>
                                <input type="range" class="qpb-form-control" id="qpb-risk" min="1" max="5" value="3" oninput="qpb_updateRisk()">
                            </div>
                            <div class="qpb-control-item">
                                <label>Horizon: <span class="qpb-range-value" id="qpb-horizon-value">2 Years</span></label>
                                <select class="qpb-form-control" id="qpb-horizon" onchange="qpb_updateHorizon()">
                                    <option value="3">3 Months</option>
                                    <option value="6">6 Months</option>
                                    <option value="12">1 Year</option>
                                    <option value="24" selected>2 Years</option>
                                    <option value="60">5 Years</option>
                                    <option value="120">10 Years</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="qpb-card">
                            <h4><i class="fas fa-cog"></i> Portfolio</h4>
                            <div class="qpb-control-item">
                                <label>Size: <span class="qpb-range-value" id="qpb-size-value">5M</span></label>
                                <input type="range" class="qpb-form-control" id="qpb-portfolioSize" min="1" max="10" value="5" oninput="qpb_updatePortfolioSize()">
                            </div>
                            <div class="qpb-control-item">
                                <label>Return: <span class="qpb-range-value" id="qpb-return-value">12%</span> annually</label>
                                <input type="range" class="qpb-form-control" id="qpb-expectedReturn" min="5" max="30" value="12" oninput="qpb_updateValue('qpb-expectedReturn','qpb-return-value','%')">
                            </div>
                            <div class="qpb-control-item">
                                <label>Market:</label>
                                <select class="qpb-form-control" id="qpb-marketCondition">
                                    <option value="bullish">Bullish</option>
                                    <option value="bearish">Bearish</option>
                                    <option value="volatile">Volatile</option>
                                    <option value="stable">Stable</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="qpb-card">
                            <h4><i class="fas fa-industry"></i> Sectors</h4>
                            <div class="qpb-control-item">
                                <div class="qpb-form-check">
                                    <input class="qpb-form-check-input" type="checkbox" id="qpb-banking" checked>
                                    <label for="qpb-banking">Banking</label>
                                </div>
                            </div>
                            <div class="qpb-control-item">
                                <div class="qpb-form-check">
                                    <input class="qpb-form-check-input" type="checkbox" id="qpb-pharma">
                                    <label for="qpb-pharma">Pharma</label>
                                </div>
                            </div>
                            <div class="qpb-control-item">
                                <div class="qpb-form-check">
                                    <input class="qpb-form-check-input" type="checkbox" id="qpb-energy" checked>
                                    <label for="qpb-energy">Energy</label>
                                </div>
                            </div>
                            <div class="qpb-control-item">
                                <div class="qpb-form-check">
                                    <input class="qpb-form-check-input" type="checkbox" id="qpb-telecom">
                                    <label for="qpb-telecom">Telecom</label>
                                </div>
                            </div>
                            <div class="qpb-control-item">
                                <div class="qpb-form-check">
                                    <input class="qpb-form-check-input" type="checkbox" id="qpb-consumer">
                                    <label for="qpb-consumer">Consumer</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="qpb-container">
                    <h3 class="qpb-header">
                        <i class="fas fa-coins"></i> Select Stocks (10-50)
                    </h3>
                    <div class="qpb-search-container">
                        <input type="text" class="qpb-search-input" id="qpb-stockSearch" placeholder="Search by stock name or symbol..." oninput="qpb_searchStocks(this.value)">
                        <div class="qpb-search-results" id="qpb-searchResults"></div>
                    </div>
                    
                    <div class="qpb-selected-stocks" id="qpb-selectedStocksContainer">
                        <p id="qpb-noStocksMessage">No stocks selected. Click below to add.</p>
                    </div>
                    
                    <div class="qpb-stock-grid" id="qpb-stockGrid"></div>
                    
                    <div class="qpb-controls-row">
                        <div class="text-secondary">Selected: <span id="qpb-selectedCount">0</span> stocks</div>
                        <div>
                            <button class="qpb-btn qpb-btn-outline-warning me-2" onclick="qpb_clearStocks()">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                            <button class="qpb-btn qpb-btn-outline-success" onclick="qpb_selectRandomStocks()">
                                <i class="fas fa-random"></i> Random 15
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <button class="qpb-generate-btn" onclick="qpb_createPortfolio()">
                        <i class="fas fa-cogs"></i> Generate Portfolio
                    </button>
                </div>
                
                <div id="qpb-portfolioResults" style="display:none">
                    <div class="qpb-container">
                        <h2 class="qpb-header">
                            <i class="fas fa-chart-line"></i> Analysis
                        </h2>
                        <div class="qpb-portfolio-results">
                            <div class="qpb-portfolio-section">
                                <h3><i class="fas fa-chart-pie"></i> Allocation</h3>
                                <div id="qpb-allocationChart" style="height:300px"></div>
                                <div class="qpb-stats-grid">
                                    <div class="qpb-stat-card">
                                        <div class="value">12.4%</div>
                                        <div class="label">Return</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">Medium</div>
                                        <div class="label">Risk</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">5M</div>
                                        <div class="label">Value</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">8/10</div>
                                        <div class="label">Diversity</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="qpb-portfolio-section">
                                <h3><i class="fas fa-percentage"></i> Metrics</h3>
                                <div id="qpb-performanceChart" style="height:300px"></div>
                                <div class="qpb-stats-grid">
                                    <div class="qpb-stat-card">
                                        <div class="value">0.87</div>
                                        <div class="label">Sharpe</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">14.2%</div>
                                        <div class="label">Drawdown</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">0.92</div>
                                        <div class="label">Q Score</div>
                                    </div>
                                    <div class="qpb-stat-card">
                                        <div class="value">B+</div>
                                        <div class="label">Stability</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="qpb-advice-container">
                            <h3><i class="fas fa-lightbulb"></i> Advice</h3>
                            <div class="qpb-advice-content" id="qpb-adviceContent"></div>
                        </div>
                    </div>
                    
                    <div class="qpb-container">
                        <h2 class="qpb-header">
                            <i class="fas fa-cubes"></i> Visualization
                        </h2>
                        <div class="qpb-visualization-container">
                            <div class="qpb-visualization">
                                <h3><i class="fas fa-atom"></i> Risk Matrix</h3>
                                <div id="qpb-riskReturnChart" style="height:320px"></div>
                            </div>
                            
                            <div class="qpb-visualization">
                                <h3><i class="fas fa-project-diagram"></i> Sectors</h3>
                                <div id="qpb-sectorChart" style="height:320px"></div>
                            </div>
                            
                            <div class="qpb-visualization">
                                <h3><i class="fas fa-globe-asia"></i> Quantum Sphere</h3>
                                <div id="qpb-quantumSphere" style="height:320px">
                                    <div class="qpb-quantum-indicator">
                                        <div class="qpb-quantum-node"></div>
                                        <div class="qpb-quantum-node"></div>
                                        <div class="qpb-quantum-node"></div>
                                        <div class="qpb-quantum-node"></div>
                                        <div class="qpb-quantum-node"></div>
                                    </div>
                                    <div class="text-center text-secondary mt-3">Quantum Visualization</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Data Sources Indicator -->
    <div class="data-sources">
        <h6><i class="fas fa-database"></i> Integrated Data Sources</h6>
        <div class="data-source-item">
            <i class="fas fa-satellite"></i> DSE Real-time Feed
        </div>
        <div class="data-source-item">
            <i class="fas fa-globe-asia"></i> Global Market Data
        </div>
        <div class="data-source-item">
            <i class="fas fa-newspaper"></i> Financial News Sentiment
        </div>
        <div class="data-source-item">
            <i class="fas fa-quantum-computer"></i> Quantum Prediction Models
        </div>
        <div class="data-source-item">
            <i class="fas fa-chart-network"></i> Institutional Trading Patterns
        </div>
    </div>

    <script>
        // Global variables
        let currentMainTab = 'market-overview';
        let currentEnhancedTab = 'dsex-overview';
        let currentTimeframe = '1M';
        let autoRotationEnabled = true;
        let quantumAnimationId;
        let dnaRotationActive = true;
        
        // Sector data
        const sectors = ['Banking', 'Pharma', 'Telecom', 'Energy', 'Textile', 'Food', 'IT', 'Cement'];
        const sectorPerformance = [ -2.5, 3.2, -0.8, 1.5, 0.7, 2.3, 4.1, -1.2 ];
        const sectorVulnerability = [ 0.68, 0.42, 0.55, 0.61, 0.48, 0.39, 0.72, 0.51 ];
        const sectorCorrelations = [];
        
        // Generate correlation matrix data
        for (let i = 0; i < sectors.length; i++) {
            const row = [];
            for (let j = 0; j < sectors.length; j++) {
                if (i === j) {
                    row.push(1.0);
                } else {
                    row.push(Number((Math.random() * 2 - 1).toFixed(2)));
                }
            }
            sectorCorrelations.push(row);
        }
        
        // Stock data
        const topGainers = [
            { symbol: 'SQURPHARMA', name: 'Square Pharma', price: 229.80, change: 4.60, changePercent: 2.04 },
            { symbol: 'RENATA', name: 'Renata Limited', price: 512.10, change: 5.20, changePercent: 1.03 },
            { symbol: 'BEXPHARMA', name: 'Beximco Pharma', price: 115.70, change: 1.20, changePercent: 1.05 },
            { symbol: 'GP', name: 'Grameenphone', price: 315.30, change: 2.10, changePercent: 0.67 },
            { symbol: 'POWERGRID', name: 'Power Grid Co', price: 45.20, change: 0.70, changePercent: 1.57 }
        ];
        
        // Technical signals
        const technicalSignals = [
            { symbol: 'DSEX', name: 'DSEX Index', signal: 'Bearish Divergence', confidence: 85 },
            { symbol: 'GP', name: 'Grameenphone', signal: 'Overbought', confidence: 78 },
            { symbol: 'SQURPHARMA', name: 'Square Pharma', signal: 'Golden Cross', confidence: 92 },
            { symbol: 'CITYBANK', name: 'City Bank', signal: 'Oversold', confidence: 81 },
            { symbol: 'EBL', name: 'Eastern Bank', signal: 'Death Cross', confidence: 76 }
        ];
        
        // Stock data for prediction tab
        const stockData = [
            // Banking Sector
            { symbol: 'BRACBANK', name: 'BRAC Bank Limited', price: 68.8, change: -1.9, changePercent: -2.69, sector: 'Banking', industry: 'Commercial Banks' },
            { symbol: 'EBL', name: 'Eastern Bank Limited', price: 22.5, change: -0.3, changePercent: -1.32, sector: 'Banking', industry: 'Commercial Banks' },
            { symbol: 'CITYBANK', name: 'City Bank Limited', price: 25.8, change: 0.6, changePercent: 2.38, sector: 'Banking', industry: 'Commercial Banks' },
            
            // Pharma Sector
            { symbol: 'SQURPHARMA', name: 'Square Pharmaceuticals', price: 229.8, change: 4.6, changePercent: 2.04, sector: 'Pharmaceuticals', industry: 'Drug Manufacturers' },
            { symbol: 'RENATA', name: 'Renata Limited', price: 512.1, change: 5.2, changePercent: 1.03, sector: 'Pharmaceuticals', industry: 'Drug Manufacturers' },
            { symbol: 'BEXPHARMA', name: 'Beximco Pharmaceuticals', price: 115.7, change: 1.2, changePercent: 1.05, sector: 'Pharmaceuticals', industry: 'Drug Manufacturers' },
            
            // Telecom Sector
            { symbol: 'GP', name: 'Grameenphone Ltd', price: 315.3, change: 2.1, changePercent: 0.67, sector: 'Telecom', industry: 'Telecommunication Services' },
            
            // Power Sector
            { symbol: 'SUMITPOWER', name: 'Summit Power Limited', price: 32.6, change: 0.4, changePercent: 1.24, sector: 'Energy', industry: 'Utilities - Independent Power Producers' },
            { symbol: 'DSSL', name: 'Doreen Power Generations', price: 78.9, change: 2.1, changePercent: 2.73, sector: 'Energy', industry: 'Utilities - Independent Power Producers' },
            
            // Conglomerates
            { symbol: 'ACI', name: 'Advanced Chemical Industries', price: 192.7, change: -1.5, changePercent: -0.77, sector: 'Conglomerates', industry: 'Diversified' }
        ];

        // Stock logo mapping
        const stockLogoMap = {
            'SQURPHARMA': 'https://www.squarepharma.com.bd/images/logo.png',
            'RENATA': 'https://www.renatalimited.com/images/logo.png',
            'BEXPHARMA': 'https://www.beximcopharma.com/images/logo.png',
            'GP': 'https://www.grameenphone.com/favicon.ico',
            'POWERGRID': 'https://www.powergrid.com.bd/images/logo.png',
            'BRACBANK': 'https://www.bracbank.com/images/logo.png',
            'EBL': 'https://www.ebl.com.bd/images/logo.png',
            'CITYBANK': 'https://www.thecitybank.com/images/logo.png',
            'SUMITPOWER': 'https://www.summitpower.com.bd/images/logo.png',
            'DSSL': 'https://www.doreenpower.com/images/logo.png',
            'ACI': 'https://www.aci-bd.com/images/logo.png'
        };

        // Get logo URL for stock symbol
        function getLogoUrl(symbol) {
            if (stockLogoMap[symbol]) {
                return stockLogoMap[symbol];
            }
            // Default placeholder
            return `https://via.placeholder.com/50?text=${symbol.substring(0,2)}`;
        }

        // Main tab switching function
        function switchMainTab(tabName) {
            console.log('Switching to main tab:', tabName);
            
            // Remove active class from all main tabs and content
            document.querySelectorAll('#mainTabs .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('.tab-content > .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Add active class to selected tab and content
            const tabButton = document.getElementById(tabName + '-tab');
            const tabContent = document.getElementById(tabName);
            
            if (tabButton && tabContent) {
                tabButton.classList.add('active');
                tabContent.classList.add('active');
                currentMainTab = tabName;
                
                // Initialize visualizations when tab is activated
                if (tabName === 'market-overview') {
                    createMarketOverviewChart();
                    createTopGainersList();
                } else if (tabName === 'intelligence-report') {
                    createSentimentChart();
                    createIntelligenceChart();
                } else if (tabName === 'sector-analysis') {
                    createSectorPerformanceChart();
                    createSectorRankings();
                    createCorrelationMatrixChart();
                } else if (tabName === 'technical-analysis') {
                    createTechnicalChart();
                    createTechnicalSignals();
                    createMovingAveragesChart();
                    createMomentumChart();
                } else if (tabName === 'ai-models') {
                    createModelComparisonChart();
                } else if (tabName === 'enhanced-financial') {
                    switchEnhancedTab('dsex-overview');
                } else if (tabName === 'stock-prediction') {
                    // Initialize stock prediction tab
                    document.getElementById('stockSearch').value = '';
                    document.getElementById('searchResults').style.display = 'none';
                    
                    // Clear previous selection
                    document.getElementById('selectedStockName').textContent = 'Select a stock';
                    document.getElementById('selectedStockLogo').innerHTML = '';
                    document.getElementById('stockInfo').innerHTML = '<p class="text-center text-secondary">Select a stock to view details</p>';
                    
                    // Reset prediction grid
                    document.querySelectorAll('#predictionGrid .prediction-value').forEach(el => {
                        el.textContent = '--';
                    });
                    document.querySelectorAll('#predictionGrid .prediction-return').forEach(el => {
                        el.textContent = '--';
                        el.className = 'prediction-return';
                    });
                    
                    // Clear chart
                    Plotly.purge('stockPredictionChart');
                } else if (tabName === 'quantum-deep') {
                    switchQuantumDeepTab('market-dna');
                } else if (tabName === 'quantum-dna') {
                    createDNAVisualization();
                    createQuantumMatrix();
                } else if (tabName === 'quantum-portfolio') {
                    qpb_initPortfolioBuilder();
                }
            } else {
                console.error('Main tab not found:', tabName);
            }
        }

        // Enhanced tab switching function
        function switchEnhancedTab(tabName) {
            console.log('Switching to enhanced tab:', tabName);
            
            // Remove active class from all enhanced tabs and content
            document.querySelectorAll('#enhancedTabs .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('#enhanced-financial .tab-content > .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Add active class to selected tab and content
            const tabButton = document.getElementById(tabName + '-tab');
            const tabContent = document.getElementById(tabName);
            
            if (tabButton && tabContent) {
                tabButton.classList.add('active');
                tabContent.classList.add('active');
                currentEnhancedTab = tabName;
                
                // Initialize visualizations when tab is activated
                if (tabName === 'dsex-overview') {
                    createDsexPredictionChart();
                } else if (tabName === 'crash-prediction') {
                    createCrashPredictionChart();
                    createSectorVulnerabilityChart();
                } else if (tabName === 'predictive-models') {
                    createModelPerformanceChart();
                    createFeatureImportanceChart();
                    createMultiHorizonChart();
                } else if (tabName === '4d-analysis') {
                    init4DAnalysis();
                } else if (tabName === 'ds30-stocks') {
                    createStocksHeatmapChart();
                    createStocksList();
                    createStockPredictionsChart();
                }
            } else {
                console.error('Enhanced tab not found:', tabName);
            }
        }

        // Timeframe switching function
        function switchTimeframe(timeframe) {
            console.log('Switching to timeframe:', timeframe);
            
            // Remove active class from all timeframe buttons
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to selected timeframe
            event.target.classList.add('active');
            currentTimeframe = timeframe;
            
            // Reload charts with new timeframe
            if (currentEnhancedTab === 'dsex-overview') {
                createDsexPredictionChart();
            }
        }

        // Enhanced Quantum Market Correlation Sphere
        function init4DAnalysis() {
            const container = document.getElementById('fourDContainer');
            if (!container) return;

            // Clear existing content
            container.innerHTML = '';
            
            // Add tooltip container
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            container.appendChild(tooltip);
            
            // Add mouse move event for tooltips
            container.addEventListener('mousemove', function(event) {
                // Position tooltip near cursor
                tooltip.style.left = (event.clientX + 10) + 'px';
                tooltip.style.top = (event.clientY + 10) + 'px';
                
                // Simulate finding a hovered particle
                if (Math.random() > 0.95) {
                    const economicFactors = [
                        "Macro: GDP Growth (6.8%)",
                        "Micro: Industry Earnings +12%",
                        "BB T-bill Rate: 7.25%",
                        "Inflation (BBS): 6.2%",
                        "Capital Flow: Institutional +2.1B",
                        "Market Structure: High Volatility",
                        "Sector Correlation: Banking + Telecom"
                    ];
                    
                    const randomFactor = economicFactors[Math.floor(Math.random() * economicFactors.length)];
                    const sector = sectors[Math.floor(Math.random() * sectors.length)];
                    
                    tooltip.innerHTML = `
                        <div class="small mb-2"><strong>Economic Correlation</strong></div>
                        <div class="small text-secondary">${randomFactor}</div>
                        <div class="small mt-2"><strong>Industry Impact:</strong> ${sector}</div>
                    `;
                    
                    tooltip.style.opacity = 1;
                } else {
                    tooltip.style.opacity = 0;
                }
            });
            
            container.addEventListener('mouseleave', function() {
                tooltip.style.opacity = 0;
            });
            
            // Add quantum animation
            const quantumIndicator = document.createElement('div');
            quantumIndicator.className = 'quantum-indicator';
            for (let i = 0; i < 5; i++) {
                const node = document.createElement('div');
                node.className = 'quantum-node';
                quantumIndicator.appendChild(node);
            }
            container.appendChild(quantumIndicator);
        }
        
        // Enhanced Quantum DNA Visualization
        function createDNAVisualization() {
            const container = document.getElementById('dnaVisualization');
            container.innerHTML = '';
            
            const dnaStrand = document.createElement('div');
            dnaStrand.className = 'dna-strand';
            
            for (let i = 0; i < 20; i++) {
                const node = document.createElement('div');
                node.className = 'dna-node quantum-dna-node';
                node.style.left = `${5 + i * 4.5}%`;
                node.style.top = `${50 + Math.sin(i * 0.8) * 40}%`;
                dnaStrand.appendChild(node);
            }
            
            container.appendChild(dnaStrand);
        }
        
        // Create Quantum Matrix
        function createQuantumMatrix() {
            const container = document.getElementById('quantumMatrix');
            container.innerHTML = '';
            
            const matrixElements = [
                'Market Sentiment', 'Volatility Index', 'Liquidity Flow', 
                'Price Momentum', 'Quantum Entanglement', 'Sector Correlation',
                'Institutional Activity', 'Retail Participation'
            ];
            
            matrixElements.forEach(element => {
                const cell = document.createElement('div');
                cell.className = 'matrix-cell';
                cell.innerHTML = `
                    <h6>${element}</h6>
                    <div class="progress mt-2">
                        <div class="progress-bar" style="width: ${Math.floor(Math.random() * 80) + 20}%"></div>
                    </div>
                `;
                container.appendChild(cell);
            });
        }
        
        // AI Model Activation
        function activateModel(modelName) {
            const button = event.target;
            const originalText = button.innerHTML;
            
            // Show loading state
            button.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Activating...';
            button.disabled = true;
            
            // Create status indicator
            const statusIndicator = document.createElement('span');
            statusIndicator.className = 'model-status model-loading';
            button.parentNode.appendChild(statusIndicator);
            
            // Simulate activation process
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                statusIndicator.className = 'model-status model-active';
                
                // Show success message
                const alert = document.createElement('div');
                alert.className = 'alert alert-success';
                alert.innerHTML = `<i class="fas fa-check-circle"></i> ${modelName} activated successfully!`;
                
                const container = document.querySelector('.container');
                container.insertBefore(alert, container.firstChild);
                
                setTimeout(() => {
                    alert.remove();
                }, 3000);
            }, 2000);
        }
        
        // Create Market Overview Chart
        function createMarketOverviewChart() {
            const dates = [];
            const prices = [];
            const volumes = [];
            
            // Generate data for the last 30 days
            const today = new Date();
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Simulate price movement
                if (i === 29) {
                    prices.push(5300);
                } else {
                    const change = (Math.random() - 0.5) * 50;
                    prices.push(prices[prices.length - 1] + change);
                }
                
                // Simulate volume
                volumes.push(Math.floor(Math.random() * 30000000) + 150000000);
            }
            
            // Create chart
            const trace1 = {
                x: dates,
                y: prices,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'DSEX Index',
                line: { color: '#00ff88' },
                yaxis: 'y'
            };
            
            const trace2 = {
                x: dates,
                y: volumes,
                type: 'bar',
                name: 'Volume',
                marker: { color: 'rgba(55, 66, 250, 0.6)' },
                yaxis: 'y2'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Index Value'
                },
                yaxis2: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Volume',
                    overlaying: 'y',
                    side: 'right'
                },
                margin: { t: 30, r: 60, b: 80, l: 60 },
                legend: { font: { color: '#ffffff' } }
            };
            
            Plotly.newPlot('marketOverviewChart', [trace1, trace2], layout, {responsive: true});
        }
        
        // Create Top Gainers List
        function createTopGainersList() {
            const container = document.getElementById('topGainersList');
            container.innerHTML = '';
            
            topGainers.forEach(stock => {
                const ticker = document.createElement('div');
                ticker.className = `stock-ticker ${stock.change > 0 ? 'stock-up' : 'stock-down'}`;
                
                // Added stock logo
                ticker.innerHTML = `
                    <div class="stock-ticker-content">
                        <div class="stock-info">
                            <div class="stock-logo-container">
                                <img src="${getLogoUrl(stock.symbol)}" alt="${stock.symbol}" class="stock-logo">
                            </div>
                            <div>
                                <strong>${stock.symbol}</strong>
                                <div class="small">${stock.name}</div>
                            </div>
                        </div>
                        <div class="stock-price-info">
                            <div>${stock.price.toFixed(2)}</div>
                            <div class="${stock.change > 0 ? 'text-success' : 'text-danger'}">
                                ${stock.change > 0 ? '' : ''} ${Math.abs(stock.change.toFixed(2))} (${Math.abs(stock.changePercent.toFixed(2))}%)
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(ticker);
            });
        }
        
        // Create Sentiment Chart
        function createSentimentChart() {
            const data = [{
                values: [35, 25, 40],
                labels: ['Bullish', 'Bearish', 'Neutral'],
                type: 'pie',
                marker: {
                    colors: ['#00ff88', '#ff4757', '#ffa502']
                },
                textinfo: 'label+percent',
                hole: 0.4,
                rotation: 90
            }];
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                showlegend: false,
                margin: { t: 0, r: 0, b: 0, l: 0 },
                height: 300
            };
            
            Plotly.newPlot('sentimentChart', data, layout, {responsive: true});
        }
        
        // Create Intelligence Chart
        function createIntelligenceChart() {
            // Generate data for multiple dimensions
            const dimensions = [
                { label: 'Market Sentiment', range: [0, 100], value: 65 },
                { label: 'Economic Health', range: [0, 100], value: 78 },
                { label: 'Technical Strength', range: [0, 100], value: 42 },
                { label: 'Volatility Risk', range: [0, 100], value: 72 },
                { label: 'Liquidity Score', range: [0, 100], value: 85 },
                { label: 'Global Influence', range: [0, 100], value: 55 }
            ];
            
            const data = [{
                type: 'scatterpolar',
                r: dimensions.map(d => d.value),
                theta: dimensions.map(d => d.label),
                fill: 'toself',
                line: { color: '#00ff88' },
                marker: { size: 8, color: '#00ff88' }
            }];
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 100],
                        gridcolor: '#404040'
                    },
                    angularaxis: {
                        gridcolor: '#404040'
                    },
                    bgcolor: 'rgba(0,0,0,0.2)'
                },
                margin: { t: 30, r: 30, b: 30, l: 30 },
                height: 400
            };
            
            Plotly.newPlot('intelligenceChart', data, layout, {responsive: true});
        }
        
        // Create Sector Performance Chart
        function createSectorPerformanceChart() {
            const colors = sectorPerformance.map(p => 
                p > 0 ? 'rgba(46, 213, 115, 0.7)' : 'rgba(255, 71, 87, 0.7)'
            );
            
            const trace = {
                x: sectors,
                y: sectorPerformance,
                type: 'bar',
                marker: {
                    color: colors
                },
                text: sectorPerformance.map(p => `${p > 0 ? '+' : ''}${p.toFixed(1)}%`),
                textposition: 'auto'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'Sector Performance (1 Month)',
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Sector'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Change (%)'
                },
                margin: { t: 40, r: 20, b: 100, l: 60 },
                height: 400
            };
            
            Plotly.newPlot('sectorPerformanceChart', [trace], layout, {responsive: true});
        }
        
        // Create Sector Rankings
        function createSectorRankings() {
            const container = document.getElementById('sectorRankings');
            container.innerHTML = '';
            
            // Create ranked list
            const rankedSectors = sectors.map((sector, i) => {
                return { name: sector, performance: sectorPerformance[i] };
            });
            
            // Sort by performance
            rankedSectors.sort((a, b) => b.performance - a.performance);
            
            // Create elements
            rankedSectors.forEach((sector, index) => {
                const rankElem = document.createElement('div');
                rankElem.className = 'd-flex justify-content-between align-items-center mb-3';
                rankElem.innerHTML = `
                    <div class="d-flex align-items-center">
                        <span class="badge bg-${index < 3 ? 'success' : 'secondary'} me-2" style="width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">${index + 1}</span>
                        <div>
                            <div class="fw-bold">${sector.name}</div>
                            <div class="small text-secondary">Performance</div>
                        </div>
                    </div>
                    <div class="${sector.performance > 0 ? 'text-success' : 'text-danger'} fw-bold">
                        ${sector.performance > 0 ? '+' : ''}${sector.performance.toFixed(1)}%
                    </div>
                `;
                container.appendChild(rankElem);
            });
        }
        
        // Create Correlation Matrix Chart
        function createCorrelationMatrixChart() {
            const data = [{
                z: sectorCorrelations,
                x: sectors,
                y: sectors,
                type: 'heatmap',
                colorscale: 'RdBu',
                reversescale: true,
                zmin: -1,
                zmax: 1
            }];
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    tickangle: -45
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8'
                },
                margin: { t: 30, r: 30, b: 150, l: 150 },
                height: 500
            };
            
            Plotly.newPlot('correlationMatrixChart', data, layout, {responsive: true});
        }
        
        // Create Technical Chart
        function createTechnicalChart() {
            const dates = [];
            const prices = [];
            const rsi = [];
            const macd = [];
            
            // Generate data for the last 30 days
            const today = new Date();
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Simulate price movement
                if (i === 29) {
                    prices.push(5300);
                } else {
                    const change = (Math.random() - 0.5) * 50;
                    prices.push(prices[prices.length - 1] + change);
                }
                
                // Simulate RSI (30-70 range)
                rsi.push(Math.random() * 40 + 30);
                
                // Simulate MACD (-2 to 2 range)
                macd.push((Math.random() * 4) - 2);
            }
            
            // Create chart
            const trace1 = {
                x: dates,
                y: prices,
                type: 'scatter',
                mode: 'lines',
                name: 'DSEX',
                line: { color: '#00ff88' },
                yaxis: 'y'
            };
            
            const trace2 = {
                x: dates,
                y: rsi,
                type: 'scatter',
                mode: 'lines',
                name: 'RSI',
                line: { color: '#3742fa' },
                yaxis: 'y2'
            };
            
            const trace3 = {
                x: dates,
                y: macd,
                type: 'bar',
                name: 'MACD',
                marker: { color: 'rgba(255, 165, 2, 0.6)' },
                yaxis: 'y3'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Price'
                },
                yaxis2: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'RSI',
                    overlaying: 'y',
                    side: 'right',
                    range: [0, 100]
                },
                yaxis3: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'MACD',
                    overlaying: 'y',
                    side: 'right',
                    position: 0.95
                },
                margin: { t: 30, r: 100, b: 80, l: 60 },
                legend: { 
                    font: { color: '#ffffff' },
                    orientation: 'h',
                    y: -0.2
                },
                height: 500
            };
            
            Plotly.newPlot('technicalChart', [trace1, trace2, trace3], layout, {responsive: true});
        }
        
        // Create Technical Signals
        function createTechnicalSignals() {
            const container = document.getElementById('technicalSignals');
            container.innerHTML = '';
            
            technicalSignals.forEach(signal => {
                const signalType = signal.signal.includes('Bearish') || signal.signal.includes('Death') ? 
                    'signal-sell' : 
                    signal.signal.includes('Bullish') || signal.signal.includes('Golden') ? 
                    'signal-buy' : 'signal-hold';
                
                const confidenceLevel = signal.confidence > 85 ? 'performance-good' : 
                    signal.confidence > 70 ? 'performance-medium' : 'performance-poor';
                
                const card = document.createElement('div');
                card.className = `signal-card ${signalType}`;
                
                // Added stock logo
                card.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="stock-info">
                            <div class="stock-logo-container">
                                <img src="${getLogoUrl(signal.symbol)}" alt="${signal.symbol}" class="stock-logo">
                            </div>
                            <div>
                                <strong>${signal.symbol}</strong>
                                <div class="small">${signal.name}</div>
                            </div>
                        </div>
                        <div class="text-end">
                            <div>${signal.signal}</div>
                            <div class="small">Confidence: <span class="${confidenceLevel}">${signal.confidence}%</span></div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        // Create Moving Averages Chart
        function createMovingAveragesChart() {
            const dates = [];
            const prices = [];
            const sma50 = [];
            const sma200 = [];
            
            // Generate data for the last 90 days
            const today = new Date();
            for (let i = 89; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Simulate price movement
                if (i === 89) {
                    prices.push(5200);
                } else {
                    const change = (Math.random() - 0.5) * 50;
                    prices.push(prices[prices.length - 1] + change);
                }
                
                // Calculate SMAs
                if (i <= 89 - 50) {
                    const sum50 = prices.slice(prices.length - 50).reduce((a, b) => a + b, 0);
                    sma50.push(sum50 / 50);
                } else {
                    sma50.push(null);
                }
                
                if (i <= 89 - 200) {
                    const sum200 = prices.slice(prices.length - 200).reduce((a, b) => a + b, 0);
                    sma200.push(sum200 / 200);
                } else {
                    sma200.push(null);
                }
            }
            
            // Create chart
            const trace1 = {
                x: dates,
                y: prices,
                type: 'scatter',
                mode: 'lines',
                name: 'Price',
                line: { color: '#00ff88' }
            };
            
            const trace2 = {
                x: dates,
                y: sma50,
                type: 'scatter',
                mode: 'lines',
                name: 'SMA 50',
                line: { color: '#3742fa' }
            };
            
            const trace3 = {
                x: dates,
                y: sma200,
                type: 'scatter',
                mode: 'lines',
                name: 'SMA 200',
                line: { color: '#ffa502' }
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Price'
                },
                margin: { t: 30, r: 30, b: 60, l: 60 },
                legend: { font: { color: '#ffffff' } },
                height: 300
            };
            
            Plotly.newPlot('movingAveragesChart', [trace1, trace2, trace3], layout, {responsive: true});
        }
        
        // Create Momentum Chart
        function createMomentumChart() {
            const dates = [];
            const rsi = [];
            const stochastic = [];
            
            // Generate data for the last 90 days
            const today = new Date();
            for (let i = 89; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Simulate RSI (30-70 range)
                rsi.push(Math.random() * 40 + 30);
                
                // Simulate Stochastic (0-100 range)
                stochastic.push(Math.random() * 100);
            }
            
            // Create chart
            const trace1 = {
                x: dates,
                y: rsi,
                type: 'scatter',
                mode: 'lines',
                name: 'RSI',
                line: { color: '#3742fa' }
            };
            
            const trace2 = {
                x: dates,
                y: stochastic,
                type: 'scatter',
                mode: 'lines',
                name: 'Stochastic',
                line: { color: '#ffa502' },
                yaxis: 'y2'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'RSI',
                    range: [0, 100]
                },
                yaxis2: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Stochastic',
                    overlaying: 'y',
                    side: 'right',
                    range: [0, 100]
                },
                margin: { t: 30, r: 60, b: 60, l: 60 },
                legend: { 
                    font: { color: '#ffffff' },
                    orientation: 'h',
                    y: -0.2
                },
                height: 300
            };
            
            Plotly.newPlot('momentumChart', [trace1, trace2], layout, {responsive: true});
        }
        
        // Create Model Comparison Chart
        function createModelComparisonChart() {
            const models = ['Quantum NN', 'Deep Transformer', 'Bayesian Net', 'Linear Regression', 'Time Series LSTM'];
            const accuracy = [93.7, 89.2, 91.5, 75.4, 85.6];
            const speed = [4.2, 8.7, 5.1, 0.3, 12.5];
            
            const trace1 = {
                x: models,
                y: accuracy,
                type: 'bar',
                name: 'Accuracy (%)',
                marker: { color: '#00ff88' }
            };
            
            const trace2 = {
                x: models,
                y: speed,
                type: 'bar',
                name: 'Speed (ms)',
                marker: { color: '#3742fa' },
                yaxis: 'y2'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Model'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Accuracy (%)'
                },
                yaxis2: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Speed (ms)',
                    overlaying: 'y',
                    side: 'right'
                },
                margin: { t: 50, r: 60, b: 100, l: 60 },
                legend: { font: { color: '#ffffff' } },
                height: 400
            };
            
            Plotly.newPlot('modelComparisonChart', [trace1, trace2], layout, {responsive: true});
        }
        
        // Create DSEX Prediction Chart
        function createDsexPredictionChart() {
            const historicalDates = [];
            const historicalPrices = [];
            const predictionDates = [];
            const predictionPrices = [];
            
            // Historical data (past 180 days)
            const today = new Date();
            for (let i = 179; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                historicalDates.push(date.toISOString().split('T')[0]);
                
                if (i === 179) {
                    historicalPrices.push(5200);
                } else {
                    const change = (Math.random() - 0.5) * 50;
                    historicalPrices.push(historicalPrices[historicalPrices.length - 1] + change);
                }
            }
            
            // Prediction data (next 90 days)
            for (let i = 1; i <= 90; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                predictionDates.push(date.toISOString().split('T')[0]);
                
                if (i === 1) {
                    predictionPrices.push(historicalPrices[historicalPrices.length - 1]);
                } else {
                    // More optimistic prediction with slight upward bias
                    const change = (Math.random() * 0.7 + 0.15) * 30;
                    predictionPrices.push(predictionPrices[predictionPrices.length - 1] + change);
                }
            }
            
            // Create chart
            const trace1 = {
                x: historicalDates,
                y: historicalPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Historical',
                line: { color: '#00ff88' }
            };
            
            const trace2 = {
                x: predictionDates,
                y: predictionPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Quantum Prediction',
                line: { color: '#ffa502', dash: 'dash' }
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'DSEX 6-Month Forecast',
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Index Value'
                },
                margin: { t: 50, r: 30, b: 80, l: 60 },
                legend: { font: { color: '#ffffff' } },
                height: 450
            };
            
            Plotly.newPlot('dsexPredictionChart', [trace1, trace2], layout, {responsive: true});
        }
        
        // Create Crash Prediction Chart
        function createCrashPredictionChart() {
            const dates = [];
            const crashProb = [];
            
            // Generate data for next 30 days
            const today = new Date();
            for (let i = 0; i <= 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Simulate increasing crash probability with volatility
                if (i === 0) {
                    crashProb.push(36);
                } else {
                    const volatility = Math.random() * 10;
                    crashProb.push(Math.min(95, crashProb[i - 1] + volatility - 2));
                }
            }
            
            // Create chart
            const trace = {
                x: dates,
                y: crashProb,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Crash Probability',
                line: { color: '#ff4757', width: 3 },
                marker: { size: 8 }
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: '30-Day Market Crash Probability',
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Probability (%)',
                    range: [0, 100]
                },
                margin: { t: 50, r: 30, b: 80, l: 60 },
                height: 400
            };
            
            Plotly.newPlot('crashPredictionChart', [trace], layout, {responsive: true});
        }
        
        // Create Sector Vulnerability Chart
        function createSectorVulnerabilityChart() {
            const colors = sectorVulnerability.map(v => 
                `rgba(255, ${Math.floor(71 + (1-v)*184)}, ${Math.floor(87 + (1-v)*168)}, 0.7)`
            );
            
            const trace = {
                x: sectors,
                y: sectorVulnerability,
                type: 'bar',
                marker: {
                    color: colors
                },
                text: sectorVulnerability.map(v => (v * 100).toFixed(0) + '%'),
                textposition: 'auto'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'Sector Vulnerability Index',
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Sector'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Vulnerability',
                    range: [0, 1]
                },
                margin: { t: 40, r: 20, b: 100, l: 60 },
                height: 350
            };
            
            Plotly.newPlot('sectorVulnerabilityChart', [trace], layout, {responsive: true});
        }
        
        // Create Stocks Heatmap Chart
        function createStocksHeatmapChart() {
            const stocks = ['GP', 'SQURPHARMA', 'BRACBANK', 'RENATA', 'EBL', 'CITYBANK', 'BEXPHARMA', 'SUMITPOWER', 'ACI', 'DSSL'];
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            
            // Generate performance data
            const performance = [];
            for (let i = 0; i < stocks.length; i++) {
                const row = [];
                for (let j = 0; j < days.length; j++) {
                    row.push(Number((Math.random() * 10 - 5).toFixed(1)));
                }
                performance.push(row);
            }
            
            // Create chart
            const data = [{
                z: performance,
                x: days,
                y: stocks,
                type: 'heatmap',
                colorscale: 'RdBu',
                reversescale: true,
                zmin: -5,
                zmax: 5,
                text: performance.map(row => row.map(val => `${val > 0 ? '+' : ''}${val}%`)),
                hoverinfo: 'text'
            }];
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8'
                },
                margin: { t: 30, r: 30, b: 30, l: 100 },
                height: 500
            };
            
            Plotly.newPlot('stocksHeatmapChart', data, layout, {responsive: true});
        }
        
        // Create Stocks List
        function createStocksList() {
            const container = document.getElementById('stocksList');
            container.innerHTML = '';
            
            const stocks = [
                { symbol: 'GP', name: 'Grameenphone', price: 315.30, change: 2.10, changePercent: 0.67 },
                { symbol: 'SQURPHARMA', name: 'Square Pharma', price: 229.80, change: 4.60, changePercent: 2.04 },
                { symbol: 'BRACBANK', name: 'BRAC Bank', price: 68.80, change: -1.90, changePercent: -2.69 },
                { symbol: 'RENATA', name: 'Renata', price: 512.10, change: 5.20, changePercent: 1.03 },
                { symbol: 'EBL', name: 'Eastern Bank', price: 22.50, change: -0.30, changePercent: -1.32 },
                { symbol: 'CITYBANK', name: 'City Bank', price: 25.80, change: 0.60, changePercent: 2.38 },
                { symbol: 'BEXPHARMA', name: 'Beximco', price: 115.70, change: 1.20, changePercent: 1.05 },
                { symbol: 'SUMITPOWER', name: 'Summit Power', price: 32.60, change: 0.40, changePercent: 1.24 },
                { symbol: 'ACI', name: 'ACI', price: 192.70, change: -1.50, changePercent: -0.77 },
                { symbol: 'DSSL', name: 'Doreen Power', price: 78.90, change: 2.10, changePercent: 2.73 }
            ];
            
            // Sort by performance
            stocks.sort((a, b) => b.changePercent - a.changePercent);
            
            stocks.forEach((stock, index) => {
                const ticker = document.createElement('div');
                ticker.className = `stock-ticker ${stock.change > 0 ? 'stock-up' : 'stock-down'}`;
                
                // Added stock logo
                ticker.innerHTML = `
                    <div class="stock-ticker-content">
                        <div class="stock-info">
                            <div class="stock-logo-container">
                                <img src="${getLogoUrl(stock.symbol)}" alt="${stock.symbol}" class="stock-logo">
                            </div>
                            <div>
                                <strong>${stock.symbol}</strong>
                                <div class="small">${stock.name}</div>
                            </div>
                        </div>
                        <div class="stock-price-info">
                            <div>${stock.price.toFixed(2)}</div>
                            <div class="${stock.change > 0 ? 'text-success' : 'text-danger'}">
                                ${stock.change > 0 ? '' : ''} ${Math.abs(stock.change.toFixed(2))} (${Math.abs(stock.changePercent.toFixed(2))}%)
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(ticker);
            });
        }
        
        // Create Stock Predictions Chart
        function createStockPredictionsChart() {
            const stocks = ['GP', 'SQURPHARMA', 'BRACBANK', 'RENATA', 'EBL'];
            const predictions = [2.8, 5.2, -1.5, 4.1, -0.8];
            const confidence = [85, 92, 78, 89, 75];
            
            const colors = predictions.map(p => p > 0 ? '#00ff88' : '#ff4757');
            
            const trace = {
                x: stocks,
                y: predictions,
                type: 'bar',
                marker: {
                    color: colors
                },
                text: predictions.map((p, i) => `${p > 0 ? '+' : ''}${p}% (${confidence[i]}%)`),
                textposition: 'auto'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: '30-Day Stock Predictions',
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Stock'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Predicted Change (%)'
                },
                margin: { t: 50, r: 30, b: 80, l: 60 },
                height: 400
            };
            
            Plotly.newPlot('stockPredictionsChart', [trace], layout, {responsive: true});
        }
        
        // Create Model Performance Chart
        function createModelPerformanceChart() {
            const models = ['Quantum NN', 'Deep Transformer', 'Bayesian Net', 'Linear Regression', 'Time Series LSTM'];
            const accuracy = [93.7, 89.2, 91.5, 75.4, 85.6];
            
            const trace = {
                x: models,
                y: accuracy,
                type: 'bar',
                marker: {
                    color: accuracy.map(a => `rgba(0, 255, 136, ${a/100})`)
                },
                text: accuracy.map(a => a + '%'),
                textposition: 'auto'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'Model Accuracy Comparison',
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Model'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Accuracy (%)',
                    range: [0, 100]
                },
                margin: { t: 50, r: 30, b: 100, l: 60 },
                height: 350
            };
            
            Plotly.newPlot('modelPerformanceChart', [trace], layout, {responsive: true});
        }
        
        // Create Feature Importance Chart
        function createFeatureImportanceChart() {
            const features = [
                'Interest Rates', 'Inflation', 'Global Markets', 
                'Currency Rates', 'Political Stability', 'Industry Growth',
                'Company Earnings', 'Market Sentiment', 'Technical Indicators'
            ];
            const importance = [0.18, 0.15, 0.12, 0.10, 0.09, 0.08, 0.07, 0.06, 0.05];
            
            // Sort by importance
            const combined = features.map((f, i) => [f, importance[i]]);
            combined.sort((a, b) => b[1] - a[1]);
            const sortedFeatures = combined.map(i => i[0]);
            const sortedImportance = combined.map(i => i[1]);
            
            const trace = {
                x: sortedImportance,
                y: sortedFeatures,
                type: 'bar',
                orientation: 'h',
                marker: {
                    color: '#00ff88'
                }
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'Quantum Feature Importance',
                xaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Importance Score'
                },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    automargin: true
                },
                margin: { t: 50, r: 0, b: 80, l: 150 },
                height: 350
            };
            
            Plotly.newPlot('featureImportanceChart', [trace], layout, {responsive: true});
        }
        
        // Create Multi-Horizon Chart
        function createMultiHorizonChart() {
            const horizons = ['1 Week', '1 Month', '3 Months', '6 Months', '1 Year'];
            const predictions = [0.8, 1.4, 3.2, 5.8, 9.5];
            const confidence = [72, 85, 78, 69, 62];
            
            const trace1 = {
                x: horizons,
                y: predictions,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Predicted Change',
                line: { color: '#00ff88', width: 3 },
                marker: { size: 10 }
            };
            
            const trace2 = {
                x: horizons,
                y: confidence,
                type: 'bar',
                name: 'Confidence',
                marker: { color: 'rgba(55, 66, 250, 0.6)' },
                yaxis: 'y2'
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: 'Multi-Horizon Market Predictions',
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Predicted Change (%)'
                },
                yaxis2: {
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Confidence (%)',
                    overlaying: 'y',
                    side: 'right',
                    range: [0, 100]
                },
                margin: { t: 50, r: 60, b: 80, l: 60 },
                legend: { font: { color: '#ffffff' } },
                height: 400
            };
            
            Plotly.newPlot('multiHorizonChart', [trace1, trace2], layout, {responsive: true});
        }
        
        // Stock search functionality
        function searchStocks(query) {
            const resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = '';
            
            if (query.length < 2) {
                resultsContainer.style.display = 'none';
                return;
            }
            
            const lowerQuery = query.toLowerCase();
            const results = stockData.filter(stock => 
                stock.name.toLowerCase().includes(lowerQuery) || 
                stock.symbol.toLowerCase().includes(lowerQuery)
            ).slice(0, 8);
            
            if (results.length > 0) {
                results.forEach(stock => {
                    const item = document.createElement('div');
                    item.className = 'search-item';
                    item.innerHTML = `
                        <div class="stock-info">
                            <div class="stock-logo-container">
                                <img src="${getLogoUrl(stock.symbol)}" alt="${stock.symbol}" class="stock-logo">
                            </div>
                            <div class="stock-info-details">
                                <div><strong>${stock.symbol}</strong> - ${stock.name}</div>
                                <div class="small text-secondary">${stock.sector} | ${stock.industry}</div>
                            </div>
                        </div>
                    `;
                    item.addEventListener('click', () => selectStock(stock));
                    resultsContainer.appendChild(item);
                });
                resultsContainer.style.display = 'block';
            } else {
                resultsContainer.style.display = 'none';
            }
        }
        
        let selectedStock = null;
        
        function selectStock(stock) {
            selectedStock = stock;
            document.getElementById('selectedStockName').textContent = `${stock.name} (${stock.symbol})`;
            document.getElementById('stockSearch').value = `${stock.symbol} - ${stock.name}`;
            document.getElementById('searchResults').style.display = 'none';
            
            // Update stock logo
            const logoContainer = document.getElementById('selectedStockLogo');
            logoContainer.innerHTML = `<img src="${getLogoUrl(stock.symbol)}" alt="${stock.symbol}" style="width:100%;height:100%;border-radius:50%;">`;
            
            // Update stock info
            document.getElementById('stockInfo').innerHTML = `
                <div class="d-flex justify-content-between mb-2">
                    <span>Current Price:</span>
                    <strong>${stock.price.toFixed(2)}</strong>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Today's Change:</span>
                    <strong class="${stock.change > 0 ? 'text-success' : 'text-danger'}">
                        ${stock.change > 0 ? '+' : ''}${stock.change.toFixed(2)} (${stock.changePercent > 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%)
                    </strong>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Sector:</span>
                    <strong>${stock.sector}</strong>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <span>Industry:</span>
                    <strong>${stock.industry}</strong>
                </div>
                <div class="alert alert-info small">
                    <i class="fas fa-info-circle"></i> ${getStockAnalysis(stock)}
                </div>
            `;
            
            // Update prediction grid
            updatePredictionGrid(stock);
            
            // Create prediction chart
            createStockPredictionChart(stock);
        }
        
        function getStockAnalysis(stock) {
            // Simple sector-based analysis
            const analysis = {
                'Banking': 'Banking sector is currently facing headwinds due to interest rate volatility. Quantum models suggest cautious short-term outlook.',
                'Pharmaceuticals': 'Pharma sector shows strong growth potential with increasing exports. Quantum models predict positive momentum.',
                'Telecom': 'Telecom sector remains stable with consistent revenue streams. Quantum models indicate steady performance.',
                'Energy': 'Power sector is benefiting from increased demand. Quantum models forecast growth in the medium term.',
                'Conglomerates': 'Diversified companies show mixed performance. Quantum models recommend selective investment.'
            };
            
            return analysis[stock.sector] || 'Quantum analysis shows this stock has average market correlation and moderate volatility.';
        }
        
        function updatePredictionGrid(stock) {
            // Generate realistic predictions based on stock sector
            const predictions = {
                '1 Day': { value: stock.price + (Math.random() - 0.3) * 2, return: (Math.random() - 0.4) * 3 },
                '3 Days': { value: stock.price + (Math.random() - 0.2) * 5, return: (Math.random() - 0.3) * 4 },
                '7 Days': { value: stock.price + (Math.random() - 0.1) * 8, return: (Math.random() - 0.2) * 6 },
                '15 Days': { value: stock.price + Math.random() * 12, return: (Math.random() - 0.1) * 8 },
                '1 Month': { value: stock.price + Math.random() * 20, return: Math.random() * 10 },
                '3 Months': { value: stock.price + Math.random() * 35, return: Math.random() * 15 },
                '6 Months': { value: stock.price + Math.random() * 50, return: Math.random() * 20 },
                '1 Year': { value: stock.price + Math.random() * 80, return: Math.random() * 30 }
            };
            
            // Pharma stocks get better predictions
            if (stock.sector === 'Pharmaceuticals') {
                Object.keys(predictions).forEach(period => {
                    predictions[period].return += 2 + Math.random() * 3;
                });
            }
            
            // Banking stocks get worse predictions
            if (stock.sector === 'Banking') {
                Object.keys(predictions).forEach(period => {
                    predictions[period].return -= 1 + Math.random() * 2;
                });
            }
            
            // Update the grid
            const grid = document.getElementById('predictionGrid');
            grid.querySelectorAll('.prediction-card').forEach((card, index) => {
                const period = card.querySelector('.prediction-period').textContent;
                const prediction = predictions[period];
                
                if (prediction) {
                    card.querySelector('.prediction-value').textContent = `${prediction.value.toFixed(2)}`;
                    
                    const returnElement = card.querySelector('.prediction-return');
                    returnElement.textContent = `${prediction.return > 0 ? '+' : ''}${prediction.return.toFixed(2)}%`;
                    returnElement.className = `prediction-return ${prediction.return > 0 ? 'return-positive' : 'return-negative'}`;
                }
            });
        }
        
        function createStockPredictionChart(stock) {
            // Generate historical and prediction data
            const historicalDates = [];
            const historicalPrices = [];
            const predictionDates = [];
            const predictionPrices = [];
            
            // Historical data (past 30 days)
            const today = new Date();
            for (let i = 30; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                historicalDates.push(date.toISOString().split('T')[0]);
                
                if (i === 30) {
                    historicalPrices.push(stock.price - stock.change);
                } else {
                    // Simulate price movement
                    const volatility = stock.sector === 'Banking' ? 1.5 : 1.0;
                    const change = (Math.random() - 0.5) * 2 * volatility;
                    historicalPrices.push(historicalPrices[historicalPrices.length - 1] + change);
                }
            }
            
            // Prediction data (next 30 days)
            for (let i = 1; i <= 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                predictionDates.push(date.toISOString().split('T')[0]);
                
                // More optimistic prediction for pharma
                const optimism = stock.sector === 'Pharmaceuticals' ? 0.7 : 0.5;
                const change = (Math.random() * optimism + 0.1) * 1.5;
                predictionPrices.push(
                    predictionPrices.length 
                    ? predictionPrices[predictionPrices.length - 1] + change
                    : historicalPrices[historicalPrices.length - 1] + change
                );
            }
            
            // Create chart
            const trace1 = {
                x: historicalDates,
                y: historicalPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Historical',
                line: { color: '#00ff88' }
            };
            
            const trace2 = {
                x: predictionDates,
                y: predictionPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Quantum Prediction',
                line: { color: '#ffa502', dash: 'dash' }
            };
            
            const layout = {
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                title: `${stock.symbol} Price Forecast`,
                xaxis: { gridcolor: '#404040', color: '#b8b8b8' },
                yaxis: { 
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    title: 'Price ()'
                },
                margin: { t: 40, r: 30, b: 60, l: 60 },
                legend: { font: { color: '#ffffff' } },
                height: 300
            };
            
            Plotly.newPlot('stockPredictionChart', [trace1, trace2], layout, {responsive: true});
        }

        // Quantum Deep Analysis functions
        function switchQuantumDeepTab(tabName) {
            console.log('Switching to quantum deep tab:', tabName);
            
            // Remove active class from all tabs and content
            document.querySelectorAll('#quantumDeepTabs .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('#quantum-deep .tab-content > .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Add active class to selected tab and content
            const tabContent = document.getElementById(tabName);
            
            if (tabContent) {
                document.querySelector(`button[onclick="switchQuantumDeepTab('${tabName}')"]`).classList.add('active');
                tabContent.classList.add('active');
                
                // Initialize visualizations
                if (tabName === 'market-dna') {
                    generateDNAVisualization();
                    createSectorDnaMatrix();
                } else if (tabName === 'correlation-matrix') {
                    generateNetwork();
                    populateCorrelationTable();
                } else if (tabName === 'predictive-analytics') {
                    createQuantumPredictiveChart();
                } else if (tabName === 'risk-dna') {
                    createRiskMap();
                    createSectorRiskProfile();
                }
            }
        }

        function generateDNAVisualization() {
            const container = document.getElementById('dnaHelix');
            if (!container) return;
            container.innerHTML = '';
            
            // Create vertical strand
            const strand = document.createElement('div');
            strand.className = 'dna-strand-vertical';
            container.appendChild(strand);
            
            // Create nodes
            const nodeCount = 15;
            const height = container.parentElement.offsetHeight;
            const nodeSpacing = height / (nodeCount + 1);
            
            for (let i = 1; i <= nodeCount; i++) {
                const node = document.createElement('div');
                node.className = 'dna-node-vertical';
                node.style.top = `${i * nodeSpacing}px`;
                node.style.left = '50%';
                container.appendChild(node);
                
                // Create connections to next node
                if (i < nodeCount) {
                    const connection = document.createElement('div');
                    connection.className = 'dna-connection';
                    connection.style.top = `${i * nodeSpacing}px`;
                    connection.style.left = '50%';
                    
                    // Alternate connection angles
                    const angle = i % 2 === 0 ? -30 : 30;
                    const length = 100;
                    connection.style.width = `${length}px`;
                    connection.style.transform = `rotate(${angle}deg)`;
                    
                    container.appendChild(connection);
                }
            }
            
            // Generate DNA sequence
            const sequenceContainer = document.getElementById('dnaSequence');
            if (!sequenceContainer) return;
            sequenceContainer.innerHTML = '';
            
            const bases = ['A', 'T', 'C', 'G'];
            const sequenceLength = 40;
            
            for (let i = 0; i < sequenceLength; i++) {
                const base = bases[Math.floor(Math.random() * bases.length)];
                const baseElem = document.createElement('span');
                baseElem.className = `dna-base dna-base-${base}`;
                baseElem.textContent = base;
                sequenceContainer.appendChild(baseElem);
            }
            
            // Start rotation if enabled
            if (dnaRotationActive) {
                startDNARotation();
            }
        }

        function startDNARotation() {
            const helix = document.querySelector('.dna-strand-vertical');
            if (!helix) return;
            
            let rotation = 0;
            
            function animate() {
                rotation += 0.5;
                helix.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
                
                if (dnaRotationActive) {
                    requestAnimationFrame(animate);
                }
            }
            
            animate();
        }

        function toggleDNARotation() {
            dnaRotationActive = !dnaRotationActive;
            const button = event.target;
            
            if (dnaRotationActive) {
                button.innerHTML = '<i class="fas fa-pause"></i> Pause Rotation';
                startDNARotation();
            } else {
                button.innerHTML = '<i class="fas fa-redo"></i> Resume Rotation';
            }
        }

        function generateNewDNA() {
            generateDNAVisualization();
        }

        function generateNetwork() {
            const container = document.getElementById('quantumNetwork');
            if (!container) return;
            container.innerHTML = '';
            
            // Create tooltip
            const tooltip = document.createElement('div');
            tooltip.className = 'quantum-network-tooltip';
            container.appendChild(tooltip);
            
            // Define sectors
            const sectors = [
                { id: 'banking', name: 'Banking', x: 50, y: 50, color: '#ff4757' },
                { id: 'energy', name: 'Energy', x: 30, y: 20, color: '#ffa502' },
                { id: 'tech', name: 'Technology', x: 70, y: 30, color: '#3742fa' },
                { id: 'health', name: 'Healthcare', x: 20, y: 70, color: '#2ed573' },
                { id: 'consumer', name: 'Consumer', x: 80, y: 60, color: '#00bfff' },
                { id: 'telecom', name: 'Telecom', x: 50, y: 80, color: '#8a2be2' }
            ];
            
            // Create nodes
            sectors.forEach(sector => {
                const node = document.createElement('div');
                node.className = 'network-node';
                node.style.backgroundColor = sector.color;
                node.style.left = `${sector.x}%`;
                node.style.top = `${sector.y}%`;
                node.textContent = sector.name.charAt(0);
                node.dataset.sector = sector.name;
                
                // Add hover effect
                node.addEventListener('mouseenter', function(e) {
                    tooltip.innerHTML = `
                        <div class="fw-bold">${sector.name}</div>
                        <div class="small">Quantum Correlation: 0.${Math.floor(Math.random() * 90 + 10)}</div>
                        <div class="small">Risk Index: 0.${Math.floor(Math.random() * 90 + 10)}</div>
                    `;
                    tooltip.style.left = `${e.clientX + 10}px`;
                    tooltip.style.top = `${e.clientY + 10}px`;
                    tooltip.style.opacity = '1';
                });
                
                node.addEventListener('mouseleave', function() {
                    tooltip.style.opacity = '0';
                });
                
                container.appendChild(node);
            });
            
            // Create connections
            const connections = [
                { from: 'banking', to: 'energy', strength: 80 },
                { from: 'banking', to: 'tech', strength: 60 },
                { from: 'tech', to: 'consumer', strength: 70 },
                { from: 'health', to: 'consumer', strength: 50 },
                { from: 'energy', to: 'telecom', strength: 40 },
                { from: 'tech', to: 'telecom', strength: 90 },
                { from: 'health', to: 'banking', strength: 30 }
            ];
            
            connections.forEach(conn => {
                const fromSector = sectors.find(s => s.id === conn.from);
                const toSector = sectors.find(s => s.id === conn.to);
                
                if (fromSector && toSector) {
                    const connection = document.createElement('div');
                    connection.className = 'network-connection';
                    
                    // Calculate line position and angle
                    const dx = toSector.x - fromSector.x;
                    const dy = toSector.y - fromSector.y;
                    const length = Math.sqrt(dx * dx + dy * dy) * 1.2; // Scale factor
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    connection.style.width = `${length}%`;
                    connection.style.left = `${fromSector.x}%`;
                    connection.style.top = `${fromSector.y}%`;
                    connection.style.transform = `rotate(${angle}deg)`;
                    connection.style.opacity = conn.strength / 100;
                    connection.style.borderTop = `${Math.max(1, conn.strength / 20)}px solid ${fromSector.color}`;
                    
                    container.appendChild(connection);
                }
            });
        }

        function createRiskMap() {
            const container = document.getElementById('riskMap');
            if (!container) return;
            container.innerHTML = '';
            
            // Define risk zones
            const zones = [
                { type: 'systemic', label: 'Systemic', size: 120, x: 30, y: 40, color: 'rgba(255, 71, 87, 0.7)' },
                { type: 'volatility', label: 'Volatility', size: 100, x: 70, y: 30, color: 'rgba(255, 165, 2, 0.7)' },
                { type: 'liquidity', label: 'Liquidity', size: 80, x: 50, y: 70, color: 'rgba(55, 66, 250, 0.7)' },
                { type: 'blackswan', label: 'Black Swan', size: 60, x: 20, y: 20, color: 'rgba(138, 43, 226, 0.7)' }
            ];
            
            // Create zones
            zones.forEach(zone => {
                const zoneElem = document.createElement('div');
                zoneElem.className = 'risk-zone';
                zoneElem.style.width = `${zone.size}px`;
                zoneElem.style.height = `${zone.size}px`;
                zoneElem.style.left = `${zone.x}%`;
                zoneElem.style.top = `${zone.y}%`;
                zoneElem.style.backgroundColor = zone.color;
                zoneElem.textContent = zone.label;
                
                // Add hover effect
                zoneElem.addEventListener('mouseenter', function() {
                    this.style.boxShadow = `0 0 20px ${zone.color}`;
                    this.style.zIndex = '20';
                });
                
                zoneElem.addEventListener('mouseleave', function() {
                    this.style.boxShadow = 'none';
                    this.style.zIndex = '10';
                });
                
                container.appendChild(zoneElem);
            });
            
            // Create legend
            const legend = document.createElement('div');
            legend.style.position = 'absolute';
            legend.style.bottom = '10px';
            legend.style.left = '10px';
            legend.style.backgroundColor = 'rgba(10, 14, 26, 0.7)';
            legend.style.padding = '10px';
            legend.style.borderRadius = '8px';
            legend.innerHTML = `
                <div class="small fw-bold">Risk Zones</div>
                <div class="d-flex align-items-center mt-2"><div style="width:12px;height:12px;background:rgba(255, 71, 87, 0.7);border-radius:2px;margin-right:5px;"></div> Systemic Risk</div>
                <div class="d-flex align-items-center mt-1"><div style="width:12px;height:12px;background:rgba(255, 165, 2, 0.7);border-radius:2px;margin-right:5px;"></div> Volatility</div>
                <div class="d-flex align-items-center mt-1"><div style="width:12px;height:12px;background:rgba(55, 66, 250, 0.7);border-radius:2px;margin-right:5px;"></div> Liquidity</div>
                <div class="d-flex align-items-center mt-1"><div style="width:12px;height:12px;background:rgba(138, 43, 226, 0.7);border-radius:2px;margin-right:5px;"></div> Black Swan</div>
            `;
            
            container.appendChild(legend);
        }

        function createSectorDnaMatrix() {
            const sectors = ['Banking', 'Energy', 'Technology', 'Healthcare', 'Consumer', 'Telecom'];
            const data = [];
            
            // Generate random correlations
            for (let i = 0; i < sectors.length; i++) {
                const row = [];
                for (let j = 0; j < sectors.length; j++) {
                    if (i === j) {
                        row.push(1);
                    } else {
                        row.push(Math.random());
                    }
                }
                data.push(row);
            }
            
            const heatmap = {
                z: data,
                x: sectors,
                y: sectors,
                type: 'heatmap',
                colorscale: 'Viridis',
                hoverongaps: false
            };
            
            const layout = {
                title: 'Sector DNA Correlation Matrix',
                xaxis: { title: 'Sector' },
                yaxis: { title: 'Sector' },
                width: 900,
                height: 500,
                margin: { t: 50, r: 0, b: 100, l: 100 },
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' }
            };
            
            Plotly.newPlot('sectorDnaMatrix', [heatmap], layout);
        }

        function createQuantumPredictiveChart() {
            const historicalDates = [];
            const historicalPrices = [];
            const predictionDates = [];
            const predictionPrices = [];
            const volatility = [];
            
            // Generate historical data
            const today = new Date();
            for (let i = 180; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(today.getDate() - i);
                historicalDates.push(date.toISOString().split('T')[0]);
                
                if (i === 180) {
                    historicalPrices.push(5200);
                } else {
                    const change = (Math.random() - 0.5) * 50;
                    historicalPrices.push(historicalPrices[historicalPrices.length - 1] + change);
                }
            }
            
            // Generate prediction data
            for (let i = 1; i <= 90; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                predictionDates.push(date.toISOString().split('T')[0]);
                
                if (i === 1) {
                    predictionPrices.push(historicalPrices[historicalPrices.length - 1]);
                    volatility.push(0.2);
                } else {
                    const change = (Math.random() * 0.7 + 0.15) * 30;
                    predictionPrices.push(predictionPrices[predictionPrices.length - 1] + change);
                    volatility.push(Math.min(0.8, volatility[volatility.length - 1] + (Math.random() - 0.5) * 0.1));
                }
            }
            
            // Create traces
            const historicalTrace = {
                x: historicalDates,
                y: historicalPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Historical',
                line: { color: '#00ff88' }
            };
            
            const predictionTrace = {
                x: predictionDates,
                y: predictionPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Quantum Prediction',
                line: { color: '#8a2be2', dash: 'dash' }
            };
            
            const volatilityTrace = {
                x: predictionDates,
                y: volatility,
                type: 'scatter',
                mode: 'lines',
                name: 'Volatility Index',
                yaxis: 'y2',
                line: { color: '#ffa502' }
            };
            
            const layout = {
                title: 'Quantum Market Prediction Model',
                xaxis: { title: 'Date' },
                yaxis: { 
                    title: 'Index Value',
                    gridcolor: '#404040', 
                    color: '#b8b8b8'
                },
                yaxis2: {
                    title: 'Volatility',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    range: [0, 1]
                },
                width: 900,
                height: 500,
                margin: { t: 50, r: 60, b: 80, l: 60 },
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                legend: { font: { color: '#ffffff' } }
            };
            
            Plotly.newPlot('quantumPredictiveChart', [historicalTrace, predictionTrace, volatilityTrace], layout);
        }

        function createSectorRiskProfile() {
            const sectors = ['Banking', 'Energy', 'Technology', 'Healthcare', 'Consumer', 'Telecom'];
            const systemicRisk = [0.85, 0.72, 0.45, 0.38, 0.52, 0.65];
            const volatilityRisk = [0.92, 0.88, 0.65, 0.42, 0.58, 0.75];
            const liquidityRisk = [0.35, 0.62, 0.28, 0.25, 0.32, 0.48];
            
            const trace1 = {
                x: sectors,
                y: systemicRisk,
                type: 'bar',
                name: 'Systemic Risk',
                marker: { color: '#ff4757' }
            };
            
            const trace2 = {
                x: sectors,
                y: volatilityRisk,
                type: 'bar',
                name: 'Volatility Risk',
                marker: { color: '#ffa502' }
            };
            
            const trace3 = {
                x: sectors,
                y: liquidityRisk,
                type: 'bar',
                name: 'Liquidity Risk',
                marker: { color: '#3742fa' }
            };
            
            const layout = {
                title: 'Sector Risk DNA Profile',
                barmode: 'group',
                xaxis: { title: 'Sector' },
                yaxis: { 
                    title: 'Risk Index',
                    gridcolor: '#404040', 
                    color: '#b8b8b8',
                    range: [0, 1]
                },
                width: 900,
                height: 500,
                margin: { t: 50, r: 0, b: 80, l: 60 },
                paper_bgcolor: 'transparent',
                plot_bgcolor: 'transparent',
                font: { color: '#ffffff' },
                legend: { font: { color: '#ffffff' } }
            };
            
            Plotly.newPlot('sectorRiskProfile', [trace1, trace2, trace3], layout);
        }

        function populateCorrelationTable() {
            const table = document.getElementById('correlationTable');
            if (!table) return;
            table.innerHTML = '';
            
            const sectorPairs = [
                { pair: 'Banking - Energy', correlation: 0.82, entanglement: 0.78, stability: 0.65, risk: 0.85 },
                { pair: 'Banking - Technology', correlation: 0.68, entanglement: 0.62, stability: 0.72, risk: 0.58 },
                { pair: 'Energy - Technology', correlation: 0.45, entanglement: 0.38, stability: 0.82, risk: 0.42 },
                { pair: 'Healthcare - Consumer', correlation: 0.72, entanglement: 0.65, stability: 0.68, risk: 0.48 },
                { pair: 'Telecom - Technology', correlation: 0.88, entanglement: 0.82, stability: 0.75, risk: 0.62 },
                { pair: 'Consumer - Energy', correlation: 0.38, entanglement: 0.32, stability: 0.85, risk: 0.35 }
            ];
            
            sectorPairs.forEach((pair, index) => {
                const row = document.createElement('tr');
                
                // Determine risk level
                let riskClass = '';
                if (pair.risk >= 0.7) riskClass = 'text-danger';
                else if (pair.risk >= 0.5) riskClass = 'text-warning';
                else riskClass = 'text-success';
                
                row.innerHTML = `
                    <td>${pair.pair}</td>
                    <td>${pair.correlation.toFixed(2)}</td>
                    <td>${pair.entanglement.toFixed(2)}</td>
                    <td>${pair.stability.toFixed(2)}</td>
                    <td class="${riskClass}">${pair.risk.toFixed(2)}</td>
                `;
                
                table.appendChild(row);
            });
        }

        // Portfolio Builder JS
        const qpb_stocks = [
            { symbol: "GP", name: "Grameenphone", price: 315.3, sector: "Telecom", volatility: 0.32, return: 9.2 },
            { symbol: "SQURPHARMA", name: "Square Pharma", price: 229.8, sector: "Pharma", volatility: 0.28, return: 12.5 },
            { symbol: "BRACBANK", name: "BRAC Bank", price: 68.8, sector: "Banking", volatility: 0.45, return: 15.8 },
            { symbol: "RENATA", name: "Renata", price: 512.1, sector: "Pharma", volatility: 0.35, return: 11.3 },
            { symbol: "EBL", name: "Eastern Bank", price: 22.5, sector: "Banking", volatility: 0.5, return: 18.2 },
            { symbol: "CITYBANK", name: "City Bank", price: 25.8, sector: "Banking", volatility: 0.42, return: 16.5 },
            { symbol: "BEXPHARMA", name: "Beximco", price: 115.7, sector: "Pharma", volatility: 0.38, return: 10.7 },
            { symbol: "SUMITPOWER", name: "Summit Power", price: 32.6, sector: "Energy", volatility: 0.4, return: 13.4 },
            { symbol: "ACI", name: "ACI", price: 192.7, sector: "Conglomerates", volatility: 0.36, return: 14.1 },
            { symbol: "DSSL", name: "Doreen Power", price: 78.9, sector: "Energy", volatility: 0.44, return: 17.2 },
            { symbol: "BSC", name: "Bangladesh Shipping", price: 42.1, sector: "Transport", volatility: 0.52, return: 19.5 },
            { symbol: "LHBL", name: "LafargeHolcim", price: 58.3, sector: "Cement", volatility: 0.3, return: 8.7 },
            { symbol: "OLYMPIC", name: "Olympic", price: 152.4, sector: "Consumer", volatility: 0.27, return: 10.1 },
            { symbol: "RECKITTBEN", name: "Reckitt Benckiser", price: 1120.5, sector: "Consumer", volatility: 0.25, return: 9.8 },
            { symbol: "MERCANBANK", name: "Mercantile Bank", price: 18.9, sector: "Banking", volatility: 0.48, return: 16.9 }
        ];
        
        let qpb_selectedStocks = [];
        
        function qpb_initPortfolioBuilder() {
            qpb_populateStockGrid();
            qpb_updatePortfolioSize();
            qpb_updateRisk();
            qpb_updateHorizon();
            document.getElementById("qpb-selectedCount").textContent = qpb_selectedStocks.length;
        }
        
        function qpb_populateStockGrid() {
            const container = document.getElementById("qpb-stockGrid");
            container.innerHTML = "";
            
            qpb_stocks.forEach(stock => {
                const card = document.createElement("div");
                card.className = "qpb-stock-card";
                card.innerHTML = `
                    <div class="symbol">${stock.symbol}</div>
                    <div class="name">${stock.name}</div>
                    <div class="price">${stock.price.toFixed(2)}</div>
                    <div class="sector"><small>${stock.sector}</small></div>
                `;
                card.addEventListener("click", () => {
                    qpb_toggleStock(stock, card);
                });
                container.appendChild(card);
            });
        }
        
        function qpb_searchStocks(query) {
            const resultsContainer = document.getElementById("qpb-searchResults");
            resultsContainer.innerHTML = "";
            
            if (!query) {
                resultsContainer.style.display = "none";
                return;
            }
            
            const lowerQuery = query.toLowerCase();
            const results = qpb_stocks.filter(stock => 
                stock.name.toLowerCase().includes(lowerQuery) || 
                stock.symbol.toLowerCase().includes(lowerQuery)
            );
            
            if (results.length > 0) {
                results.forEach(stock => {
                    const card = document.createElement("div");
                    card.className = "qpb-stock-card";
                    card.innerHTML = `
                        <div class="symbol">${stock.symbol}</div>
                        <div class="name">${stock.name}</div>
                        <div class="price">${stock.price.toFixed(2)}</div>
                    `;
                    card.addEventListener("click", () => {
                        qpb_addStock(stock);
                        document.getElementById("qpb-stockSearch").value = "";
                        resultsContainer.style.display = "none";
                    });
                    resultsContainer.appendChild(card);
                });
                resultsContainer.style.display = "block";
            } else {
                resultsContainer.innerHTML = '<div class="qpb-stock-card">No stocks found</div>';
                resultsContainer.style.display = "block";
            }
        }
        
        function qpb_toggleStock(stock, card) {
            const index = qpb_selectedStocks.findIndex(s => s.symbol === stock.symbol);
            
            if (index !== -1) {
                qpb_selectedStocks.splice(index, 1);
                card.classList.remove("selected");
            } else {
                if (qpb_selectedStocks.length < 50) {
                    qpb_selectedStocks.push(stock);
                    card.classList.add("selected");
                } else {
                    alert("Maximum 50 stocks allowed");
                }
            }
            
            qpb_updateSelectedDisplay();
            document.getElementById("qpb-selectedCount").textContent = qpb_selectedStocks.length;
        }
        
        function qpb_addStock(stock) {
            if (qpb_selectedStocks.length >= 50) {
                alert("Maximum 50 stocks allowed");
                return;
            }
            
            // Check if already selected
            if (qpb_selectedStocks.some(s => s.symbol === stock.symbol)) {
                return;
            }
            
            qpb_selectedStocks.push(stock);
            qpb_updateSelectedDisplay();
            document.getElementById("qpb-selectedCount").textContent = qpb_selectedStocks.length;
            
            // Highlight in grid
            const cards = document.querySelectorAll("#qpb-stockGrid .qpb-stock-card");
            cards.forEach(card => {
                if (card.querySelector(".symbol").textContent === stock.symbol) {
                    card.classList.add("selected");
                }
            });
        }
        
        function qpb_updateSelectedDisplay() {
            const container = document.getElementById("qpb-selectedStocksContainer");
            container.innerHTML = "";
            
            if (qpb_selectedStocks.length === 0) {
                container.innerHTML = '<p id="qpb-noStocksMessage">No stocks selected. Click below to add.</p>';
                return;
            }
            
            qpb_selectedStocks.forEach(stock => {
                const tag = document.createElement("div");
                tag.className = "qpb-selected-tag";
                tag.innerHTML = `
                    <span>${stock.symbol}</span>
                    <span class="qpb-remove-stock" onclick="qpb_removeStock('${stock.symbol}')">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                container.appendChild(tag);
            });
        }
        
        function qpb_removeStock(symbol) {
            qpb_selectedStocks = qpb_selectedStocks.filter(stock => stock.symbol !== symbol);
            qpb_updateSelectedDisplay();
            document.getElementById("qpb-selectedCount").textContent = qpb_selectedStocks.length;
            
            // Remove highlight from grid
            const cards = document.querySelectorAll("#qpb-stockGrid .qpb-stock-card");
            cards.forEach(card => {
                if (card.querySelector(".symbol").textContent === symbol) {
                    card.classList.remove("selected");
                }
            });
        }
        
        function qpb_clearStocks() {
            qpb_selectedStocks = [];
            qpb_updateSelectedDisplay();
            document.getElementById("qpb-selectedCount").textContent = 0;
            
            // Remove highlights from grid
            const cards = document.querySelectorAll("#qpb-stockGrid .qpb-stock-card.selected");
            cards.forEach(card => {
                card.classList.remove("selected");
            });
        }
        
        function qpb_selectRandomStocks() {
            qpb_clearStocks();
            
            // Shuffle stocks
            const shuffled = [...qpb_stocks].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 15);
            
            selected.forEach(stock => {
                qpb_selectedStocks.push(stock);
                
                // Highlight in grid
                const cards = document.querySelectorAll("#qpb-stockGrid .qpb-stock-card");
                cards.forEach(card => {
                    if (card.querySelector(".symbol").textContent === stock.symbol) {
                        card.classList.add("selected");
                    }
                });
            });
            
            qpb_updateSelectedDisplay();
            document.getElementById("qpb-selectedCount").textContent = qpb_selectedStocks.length;
        }
        
        function qpb_updatePortfolioSize() {
            const slider = document.getElementById("qpb-portfolioSize");
            const valueContainer = document.getElementById("qpb-size-value");
            const sizes = ["1M", "2M", "3M", "5M", "7M", "10M", "20M", "50M", "100M", "500M", "1000M"];
            valueContainer.textContent = sizes[slider.value - 1];
        }
        
        function qpb_updateRisk() {
            const slider = document.getElementById("qpb-risk");
            const valueContainer = document.getElementById("qpb-risk-value");
            const levels = ["Very Low", "Low", "Medium", "High", "Very High"];
            valueContainer.textContent = levels[slider.value - 1];
        }
        
        function qpb_updateHorizon() {
            const select = document.getElementById("qpb-horizon");
            const valueContainer = document.getElementById("qpb-horizon-value");
            valueContainer.textContent = select.options[select.selectedIndex].text;
        }
        
        function qpb_updateValue(inputId, valueId, suffix = "") {
            const input = document.getElementById(inputId);
            const valueContainer = document.getElementById(valueId);
            valueContainer.textContent = input.value + suffix;
        }
        
        function qpb_createPortfolio() {
            if (qpb_selectedStocks.length < 10) {
                alert("Minimum 10 stocks required");
                return;
            }
            
            if (qpb_selectedStocks.length > 50) {
                alert("Maximum 50 stocks allowed");
                return;
            }
            
            document.getElementById("qpb-portfolioResults").style.display = "block";
            qpb_createAllocationChart();
            qpb_createPerformanceChart();
            qpb_createRiskReturnChart();
            qpb_createSectorChart();
            qpb_generateAdvice();
            document.getElementById("qpb-portfolioResults").scrollIntoView({ behavior: "smooth" });
        }
        
        function qpb_createAllocationChart() {
            const symbols = qpb_selectedStocks.map(stock => stock.symbol);
            const weights = qpb_selectedStocks.map(() => Math.random() * 20 + 5);
            const totalWeight = weights.reduce((sum, weight) => sum + weight, 0);
            const percentages = weights.map(weight => (weight / totalWeight * 100).toFixed(1));
            
            const data = [{
                labels: symbols,
                values: percentages,
                type: "pie",
                hole: 0.4,
                marker: {
                    colors: ["#00ff88", "#3742fa", "#ffa502", "#ff4757", "#8a2be2", "#00bfff", "#2ed573", "#764ba2", "#667eea", "#c44569"]
                }
            }];
            
            const layout = {
                title: "Allocation",
                paper_bgcolor: "transparent",
                plot_bgcolor: "transparent",
                font: { color: "#fff" },
                showlegend: true,
                legend: { font: { color: "#fff" } }
            };
            
            Plotly.newPlot("qpb-allocationChart", data, layout, { responsive: true });
        }
        
        function qpb_createPerformanceChart() {
            const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const portfolioValues = [];
            const indexValues = [];
            
            let portfolioValue = 100;
            let indexValue = 100;
            
            for (let i = 0; i < months.length; i++) {
                // Simulate growth with some randomness
                const portfolioGrowth = (Math.random() * 5 - 1) / 100;
                const indexGrowth = (Math.random() * 4 - 1) / 100;
                
                portfolioValue *= (1 + portfolioGrowth);
                indexValue *= (1 + indexGrowth);
                
                portfolioValues.push(portfolioValue);
                indexValues.push(indexValue);
            }
            
            const portfolioTrace = {
                x: months,
                y: portfolioValues,
                type: "scatter",
                mode: "lines+markers",
                name: "Portfolio",
                line: { color: "#00ff88", width: 3 }
            };
            
            const indexTrace = {
                x: months,
                y: indexValues,
                type: "scatter",
                mode: "lines",
                name: "DSEX Index",
                line: { color: "#3742fa", dash: "dash" }
            };
            
            const layout = {
                title: "Performance",
                xaxis: { title: "Month" },
                yaxis: { title: "Growth (%)" },
                paper_bgcolor: "transparent",
                plot_bgcolor: "transparent",
                font: { color: "#fff" },
                legend: { font: { color: "#fff" } }
            };
            
            Plotly.newPlot("qpb-performanceChart", [portfolioTrace, indexTrace], layout, { responsive: true });
        }
        
        function qpb_createRiskReturnChart() {
            const volatilities = qpb_selectedStocks.map(stock => stock.volatility * 100);
            const returns = qpb_selectedStocks.map(stock => stock.return);
            const symbols = qpb_selectedStocks.map(stock => stock.symbol);
            
            const data = [{
                x: volatilities,
                y: returns,
                text: symbols,
                mode: "markers",
                type: "scatter",
                marker: {
                    size: 12,
                    color: returns.map(r => r > 15 ? "#00ff88" : r > 10 ? "#00bfff" : "#ffa502")
                }
            }];
            
            const layout = {
                title: "Risk-Return Matrix",
                xaxis: { title: "Risk (Volatility %)" },
                yaxis: { title: "Expected Return (%)" },
                paper_bgcolor: "transparent",
                plot_bgcolor: "transparent",
                font: { color: "#fff" }
            };
            
            Plotly.newPlot("qpb-riskReturnChart", data, layout, { responsive: true });
        }
        
        function qpb_createSectorChart() {
            const sectorCounts = {};
            
            qpb_selectedStocks.forEach(stock => {
                if (sectorCounts[stock.sector]) {
                    sectorCounts[stock.sector]++;
                } else {
                    sectorCounts[stock.sector] = 1;
                }
            });
            
            const sectors = Object.keys(sectorCounts);
            const counts = sectors.map(sector => sectorCounts[sector]);
            
            const data = [{
                x: sectors,
                y: counts,
                type: "bar",
                marker: {
                    color: sectors.map((sector, index) => {
                        const colors = ["#00ff88", "#3742fa", "#ffa502", "#ff4757", "#8a2be2"];
                        return colors[index % colors.length];
                    })
                }
            }];
            
            const layout = {
                title: "Sector Distribution",
                xaxis: { title: "Sector" },
                yaxis: { title: "Number of Stocks" },
                paper_bgcolor: "transparent",
                plot_bgcolor: "transparent",
                font: { color: "#fff" }
            };
            
            Plotly.newPlot("qpb-sectorChart", data, layout, { responsive: true });
        }
        
        function qpb_generateAdvice() {
            const age = document.getElementById("qpb-age").value;
            const risk = document.getElementById("qpb-risk").value;
            const horizon = document.getElementById("qpb-horizon").value;
            const size = document.getElementById("qpb-portfolioSize").value;
            const expectedReturn = document.getElementById("qpb-expectedReturn").value;
            const marketCondition = document.getElementById("qpb-marketCondition").value;
            
            const adviceContainer = document.getElementById("qpb-adviceContent");
            let advice = "";
            
            // Age-based advice
            if (age < 30) {
                advice += `<p>Young investor (${age} years): Focus on growth-oriented stocks with higher risk tolerance.</p>`;
            } else if (age < 50) {
                advice += `<p>Mid-career (${age} years): Balanced approach between growth and stability.</p>`;
            } else {
                advice += `<p>Experienced investor (${age} years): Prioritize capital preservation and stable returns.</p>`;
            }
            
            // Risk-based advice
            const riskLevels = ["Very Low", "Low", "Medium", "High", "Very High"];
            const riskLevel = riskLevels[risk - 1];
            advice += `<p>Risk profile: <strong>${riskLevel}</strong>. `;
            
            if (risk < 3) {
                advice += "Emphasis on stable, blue-chip stocks with consistent dividends.";
            } else if (risk > 3) {
                advice += "Higher allocation to growth stocks and emerging sectors.";
            } else {
                advice += "Balanced mix of stable and growth-oriented stocks.";
            }
            advice += "</p>";
            
            // Horizon advice
            const horizonText = document.getElementById("qpb-horizon").options[document.getElementById("qpb-horizon").selectedIndex].text;
            advice += `<p>Investment horizon: <strong>${horizonText}</strong>. `;
            
            if (horizon <= 6) {
                advice += "Focus on liquid assets with lower volatility.";
            } else if (horizon <= 24) {
                advice += "Suitable for moderate growth strategies.";
            } else {
                advice += "Allows for higher-risk, long-term growth investments.";
            }
            advice += "</p>";
            
            // Market condition advice
            advice += `<p>Market condition: <strong>${marketCondition.charAt(0).toUpperCase() + marketCondition.slice(1)}</strong>. `;
            
            if (marketCondition === "bullish") {
                advice += "Favorable for growth stocks and sector leaders.";
            } else if (marketCondition === "bearish") {
                advice += "Focus on defensive stocks and sectors.";
            } else if (marketCondition === "volatile") {
                advice += "Diversification and risk management are crucial.";
            } else {
                advice += "Suitable for balanced, dividend-focused strategies.";
            }
            advice += "</p>";
            
            // Expected return
            advice += `<p>Target return: <strong>${expectedReturn}%</strong> annually. Quantum models predict an 82% probability of achieving this target.</p>`;
            
            // Quantum insights
            advice += `
                <div class="mt-3" style="background: rgba(138, 43, 226, 0.1); border-radius: 8px; padding: 15px; border-left: 3px solid var(--quantum-purple)">
                    <h5><i class="fas fa-quantum-computer"></i> Quantum Insights</h5>
                    <ul>
                        <li>Increase allocation to Energy sector by 5-7%</li>
                        <li>Reduce Banking sector exposure in next quarter</li>
                        <li>Consider adding defensive stocks during market corrections</li>
                        <li>Monitor global commodity prices for impact on local markets</li>
                    </ul>
                    <p class="mt-2">Quantum Stability Score: <strong>92/100</strong></p>
                </div>
            `;
            
            adviceContainer.innerHTML = advice;
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Quantum DSE Prediction Dashboard...');
            
            // Set current time
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false
            });
            document.getElementById('updateTime').textContent = timeString;
            
            // Set current date
            const dateString = now.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            document.getElementById('currentDate').textContent = dateString;
            
            // Load initial content
            switchMainTab('market-overview');
            
            // Initialize Quantum DNA visualization
            createDNAVisualization();
            createQuantumMatrix();
        });
    </script>
</body>
</html>